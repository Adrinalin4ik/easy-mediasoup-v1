!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.EasyMediasoup=e()}}(function(){var e;return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return o(r||e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/core-js/array/from"),a=o(i),s=e("babel-runtime/core-js/get-iterator"),c=o(s),l=e("babel-runtime/core-js/promise"),u=o(l),d=e("babel-runtime/core-js/map"),f=o(d),p=e("babel-runtime/core-js/object/get-prototype-of"),h=o(p),m=e("babel-runtime/helpers/classCallCheck"),v=o(m),_=e("babel-runtime/helpers/createClass"),b=o(_),y=e("babel-runtime/helpers/possibleConstructorReturn"),g=o(y),w=e("babel-runtime/helpers/inherits"),k=o(w),x=e("events"),j=o(x),S=e("bowser"),C=o(S),T=e("sdp-transform"),E=o(T),R=e("./Logger"),P=o(R),O=e("protoo-client"),I=o(O),M=e("./urlFactory"),F=n(M),L=e("./utils"),A=n(L),N=new P.default("Client"),D=!0,W=!1,V={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}}},q={low:1e5,medium:3e5,high:15e5},G=[],z=[],B=void 0,U=void 0,J=function(e){function r(e){(0,v.default)(this,r),N.debug('constructor() [peerId:"%s", roomId:"%s"]',e.peerId,e.roomId);var n=(0,g.default)(this,(r.__proto__||(0,h.default)(r)).call(this));n.setMaxListeners(1/0),n.config=e,t.CLIENT=n,console.log(e),G=void 0!==e.video_constrains?e.video_constrains:V,z=void 0!==e.simulcast_options?e.simulcast_options:q,U=void 0!==e.produce?e.produce:D,B=void 0!==e.useSimulcast?e.useSimulcast:W;var o=F.getProtooUrl(e.media_server_wss,e.peerId,e.roomId),i=new I.default.WebSocketTransport(o);return n._protooPeer=new I.default.Peer(i),n._peerconnection=null,n._webcams=new f.default,n._webcam=null,n._localStream=null,n._closed=!1,n._localVideoResolution="vga",n.audioOnlyConnection=!1,n._protooPeer.on("open",function(){N.debug('protoo Peer "open" event')}),n._protooPeer.on("disconnected",function(){N.warn('protoo Peer "disconnected" event');try{n._peerconnection.close()}catch(e){}n._localStream&&A.closeMediaStream(n._localStream),n.emit("disconnected")}),n._protooPeer.on("close",function(){n._closed||(N.warn('protoo Peer "close" event'),n.close())}),n._protooPeer.on("request",n._handleRequest.bind(n)),n}return(0,k.default)(r,e),(0,b.default)(r,[{key:"close",value:function(){if(!this._closed){this._closed=!0,N.debug("close()"),this._protooPeer.close();try{this._peerconnection.close()}catch(e){}this._localStream&&A.closeMediaStream(this._localStream),this.emit("close")}}},{key:"removeVideo",value:function(e){N.debug("removeVideo()");var t=this._localStream,r=t.getVideoTracks()[0];if(!r)return N.warn("removeVideo() | no video track"),u.default.reject(new Error("no video track"));if(r.stop(),t.removeTrack(r),this._peerconnection.removeTrack){var n=void 0,o=!0,i=!1,a=void 0;try{for(var s,l=(0,c.default)(this._peerconnection.getSenders());!(o=(s=l.next()).done)&&(n=s.value,n.track!==r);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}this._peerconnection.removeTrack(n)}else this._peerconnection.addStream(t);return e?void 0:(this.emit("localstream",t,null),this._requestRenegotiation())}},{key:"addVideo",value:function(){var e=this;N.debug("addVideo()");var t=this._localStream,r=void 0,n=this._localVideoResolution;return t&&(r=t.getVideoTracks()[0]),r?(N.warn("addVideo() | there is already a video track"),u.default.reject(new Error("there is already a video track"))):this._getLocalStream({video:G[n]}).then(function(r){var o=r.getVideoTracks()[0];t?(t.addTrack(o),e._peerconnection.addTrack?e._peerconnection.addTrack(o,t):e._peerconnection.addStream(t)):(e._localStream=r,e._peerconnection.addTrack?e._peerconnection.addTrack(o,t):e._peerconnection.addStream(t)),e.emit("localstream",e._localStream,n)}).then(function(){return e._requestRenegotiation()}).catch(function(e){throw N.error("addVideo() failed: %o",e),e})}},{key:"changeWebcam",value:function(){var e=this;return 1==this.audioOnlyConnection?0:(N.debug("changeWebcam()"),u.default.resolve().then(function(){return e._updateWebcams()}).then(function(){var t=(0,a.default)(e._webcams.keys()),r=t.length,n=e._webcam?e._webcam.deviceId:void 0,o=t.indexOf(n);if(o<r-1?o++:o=0,e._webcam=e._webcams.get(t[o]),e._emitWebcamType(),!(r<2))return N.debug('changeWebcam() | new selected webcam [deviceId:"%s"]',e._webcam.deviceId),e._localVideoResolution="vga",e._peerconnection.removeTrack?e._getLocalStream({video:G[e._localVideoResolution]}).then(function(t){var r=t.getVideoTracks()[0],n=e._localStream,o=n.getVideoTracks()[0],i=void 0,a=!0,s=!1,l=void 0;try{for(var u,d=(0,c.default)(e._peerconnection.getSenders());!(a=(u=d.next()).done)&&(i=u.value,i.track!==o);a=!0);}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}i.replaceTrack(r),n.removeTrack(o),o.stop(),n.addTrack(r),e.emit("localstream",n,e._localVideoResolution)}):(e.removeVideo(!0),e.addVideo())}).catch(function(e){N.error("changeWebcam() failed: %o",e)}))}},{key:"changeVideoResolution",value:function(){var e=this;N.debug("changeVideoResolution()");var t=void 0;switch(this._localVideoResolution){case"qvga":t="vga";break;case"vga":t="hd";break;case"hd":t="qvga";break;default:throw new Error('unknown resolution "'+this._localVideoResolution+'"')}return this._localVideoResolution=t,this._peerconnection.removeTrack?this._getLocalStream({video:G[this._localVideoResolution]}).then(function(r){var n=r.getVideoTracks()[0],o=e._localStream,i=o.getVideoTracks()[0],a=void 0,s=!0,l=!1,u=void 0;try{for(var d,f=(0,c.default)(e._peerconnection.getSenders());!(s=(d=f.next()).done)&&(a=d.value,a.track!==i);s=!0);}catch(e){l=!0,u=e}finally{try{!s&&f.return&&f.return()}finally{if(l)throw u}}a.replaceTrack(n),o.removeTrack(i),i.stop(),o.addTrack(n),e.emit("localstream",o,t)}).catch(function(e){N.error("changeVideoResolution() failed: %o",e)}):(this.removeVideo(!0),this.addVideo())}},{key:"getStats",value:function(){return this._peerconnection.getStats().catch(function(e){throw N.error("pc.getStats() failed: %o",e),e})}},{key:"disableRemoteVideo",value:function(e){return this._protooPeer.send("disableremotevideo",{msid:e,disable:!0}).catch(function(e){N.warn("disableRemoteVideo() failed: %o",e)})}},{key:"enableRemoteVideo",value:function(e){return this._protooPeer.send("disableremotevideo",{msid:e,disable:!1}).catch(function(e){N.warn("enableRemoteVideo() failed: %o",e)})}},{key:"tryToConnectAudoOnly",value:function(e,t,r){this.audioOnlyConnection=!0,console.warn("PROC"),this._handleRequest(e,t,r)}},{key:"_handleRequest",value:function(e,t,r){var n=this;switch(N.debug("_handleRequest() [method:%s, data:%o]",e.method,e.data),e.method){case"joinme":var o=this._localVideoResolution;u.default.resolve().then(function(){return n._updateWebcams()}).then(function(){if(U)return n._getLocalStream({audio:!0,video:1!=n.audioOnlyConnection&&G[o]}).then(function(e){N.debug("got local stream [resolution:%s]",o),n._localStream&&A.closeMediaStream(n._localStream),n._localStream=e,n.emit("localstream",e,o)}).catch(function(o){console.error("CAMERA NOT FOUND",o),n.emit("noCameraError",o),n.tryToConnectAudoOnly(e,t,r)})}).then(function(){return n._createPeerConnection()}).then(function(){return n._peerconnection.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1})}).then(function(e){var r=e.sdp,n=E.default.parse(r);N.debug("capabilities [parsed:%O, sdp:%s]",n,r),t({capabilities:r,usePlanB:A.isPlanB()})}).then(function(){N.debug('"joinme" request accepted'),n.emit("join")}).catch(function(e){throw N.error('"joinme" request failed: %o',e),r(500,e.message),e});break;case"peers":this.emit("peers",e.data.peers),t();break;case"addpeer":this.emit("addpeer",e.data.peer),t();break;case"updatepeer":this.emit("updatepeer",e.data.peer),t();break;case"removepeer":this.emit("removepeer",e.data.peer),t();break;case"offer":var i=new RTCSessionDescription(e.data.offer),a=E.default.parse(i.sdp);N.debug("received offer [parsed:%O, sdp:%s]",a,i.sdp),u.default.resolve().then(function(){return n._peerconnection.setRemoteDescription(i)}).then(function(){return n._peerconnection.createAnswer()}).then(function(e){if(!B)return e;if(A.isPlanB()){if(n._peerconnection.localDescription&&n._peerconnection.localDescription.sdp)return e;var t=E.default.parse(e.sdp),r=void 0,o=!0,i=!1,a=void 0;try{for(var s,l=(0,c.default)(t.media);!(o=(s=l.next()).done);o=!0){var u=s.value;if("video"===u.type){r=u;break}}}catch(e){i=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}if(!r||!r.ssrcs)return e;N.debug("setting video simulcast (PlanB)");var d=void 0,f=void 0,p=void 0,h=void 0,m=void 0,v=!0,_=!1,b=void 0;try{for(var y,g=(0,c.default)(r.ssrcs);!(v=(y=g.next()).done);v=!0){var w=y.value;switch(w.attribute){case"cname":d=w.id,h=w.value;break;case"msid":m=w.value}}}catch(e){_=!0,b=e}finally{try{!v&&g.return&&g.return()}finally{if(_)throw b}}f=d+1,p=d+2,r.ssrcGroups=[{semantics:"SIM",ssrcs:d+" "+f+" "+p}],r.ssrcs=[{id:d,attribute:"cname",value:h},{id:d,attribute:"msid",value:m},{id:f,attribute:"cname",value:h},{id:f,attribute:"msid",value:m},{id:p,attribute:"cname",value:h},{id:p,attribute:"msid",value:m}];return{type:"answer",sdp:E.default.write(t)}}var k=E.default.parse(e.sdp),x=void 0;N.debug("created answer [parsed:%O, sdp:%s]",k,e.sdp);var j=!0,S=!1,C=void 0;try{for(var T,R=(0,c.default)(k.media);!(j=(T=R.next()).done);j=!0){var P=T.value;if("video"===P.type&&"sendonly"===P.direction){x=P;break}}}catch(e){S=!0,C=e}finally{try{!j&&R.return&&R.return()}finally{if(S)throw C}}return x?(N.debug("setting video simulcast (Unified-Plan)"),x.simulcast_03={value:"send rid=1,2"},x.rids=[{id:"1",direction:"send"},{id:"2",direction:"send"}],{type:"answer",sdp:E.default.write(k)}):e}).then(function(e){return n._peerconnection.setLocalDescription(e)}).then(function(){var e=n._peerconnection.localDescription,r=E.default.parse(e.sdp);N.debug("sent answer [parsed:%O, sdp:%s]",r,e.sdp),t({answer:{type:e.type,sdp:e.sdp}})}).catch(function(e){throw N.error('"offer" request failed: %o',e),r(500,e.message),e}).then(function(){(C.default.firefox||C.default.gecko)&&setTimeout(function(){return n.emit("forcestreamsupdate")},500)});break;case"activespeaker":var s=e.data;this.emit("activespeaker",s.peer,s.level),t();break;default:N.error("unknown method"),r(404,"unknown method")}}},{key:"_updateWebcams",value:function(){var e=this;return N.debug("_updateWebcams()"),this._webcams=new f.default,u.default.resolve().then(function(){return navigator.mediaDevices.enumerateDevices()}).then(function(t){var r=!0,n=!1,o=void 0;try{for(var i,a=(0,c.default)(t);!(r=(i=a.next()).done);r=!0){var s=i.value;"videoinput"===s.kind&&e._webcams.set(s.deviceId,s)}}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}}).then(function(){var t=(0,a.default)(e._webcams.values()),r=t.length,n=e._webcam?e._webcam.deviceId:void 0;N.debug("_updateWebcams() [webcams:%o]",t),0===r?e._webcam=null:e._webcams.has(n)||(e._webcam=t[0]),e.emit("numwebcams",r),e._emitWebcamType()})}},{key:"_getLocalStream",value:function(e){return N.debug("_getLocalStream() [constraints:%o, webcam:%o]",e,this._webcam),this._webcam&&(e.video.deviceId={exact:this._webcam.deviceId}),navigator.mediaDevices.getUserMedia(e)}},{key:"_createPeerConnection",value:function(){var e=this;N.debug("_createPeerConnection()"),this._peerconnection=new RTCPeerConnection({iceServers:this.config.turnservers||[]}),t.PC=this._peerconnection,this._localStream&&this._peerconnection.addStream(this._localStream),this._peerconnection.addEventListener("iceconnectionstatechange",function(){var t=e._peerconnection.iceConnectionState;"failed"===t?N.warn('peerconnection "iceconnectionstatechange" event [state:failed]'):N.debug('peerconnection "iceconnectionstatechange" event [state:%s]',t),e.emit("connectionstate",t)}),this._peerconnection.addEventListener("addstream",function(t){var r=t.stream;N.debug('peerconnection "addstream" event [stream:%o]',r),e.emit("addstream",r);var n=setInterval(function(){r.active||(N.warn("stream inactive [stream:%o]",r),clearInterval(n))},2e3);r.addEventListener("addtrack",function(t){var r=t.track;N.debug('stream "addtrack" event [track:%o]',r),e.emit("addtrack",r),r.addEventListener("ended",function(){N.debug('track "ended" event [track:%o]',r),e.emit("removetrack",r)})}),r.addEventListener("removetrack",function(t){var r=t.track;N.debug('stream "removetrack" event [track:%o]',r),e.emit("removetrack",r)})}),this._peerconnection.addEventListener("removestream",function(t){var r=t.stream;N.debug('peerconnection "removestream" event [stream:%o]',r),e.emit("removestream",r)})}},{key:"_requestRenegotiation",value:function(){return N.debug("_requestRenegotiation()"),this._protooPeer.send("reofferme")}},{key:"_restartIce",value:function(){return N.debug("_restartIce()"),this._protooPeer.send("restartice").then(function(){N.debug("_restartIce() succeded")}).catch(function(e){throw N.error("_restartIce() failed: %o",e),e})}},{key:"_emitWebcamType",value:function(){var e=this._webcam;e&&(/(back|rear)/i.test(e.label)?(N.debug("_emitWebcamType() | it seems to be a back camera"),this.emit("webcamtype","back")):(N.debug("_emitWebcamType() | it seems to be a front camera"),this.emit("webcamtype","front")))}}]),r}(j.default.EventEmitter);r.default=J}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Logger":2,"./urlFactory":9,"./utils":10,"babel-runtime/core-js/array/from":11,"babel-runtime/core-js/get-iterator":12,"babel-runtime/core-js/map":15,"babel-runtime/core-js/object/get-prototype-of":18,"babel-runtime/core-js/promise":21,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/helpers/inherits":27,"babel-runtime/helpers/possibleConstructorReturn":28,bowser:31,events:158,"protoo-client":163,"sdp-transform":176}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=n(o),a=e("babel-runtime/helpers/createClass"),s=n(a),c=e("debug"),l=n(c),u="mediasoup-demo",d=function(){function e(t){(0,i.default)(this,e),t?(this._debug=(0,l.default)(u+":"+t),this._warn=(0,l.default)(u+":WARN:"+t),this._error=(0,l.default)(u+":ERROR:"+t)):(this._debug=(0,l.default)(u),this._warn=(0,l.default)(u+":WARN"),this._error=(0,l.default)(u+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,s.default)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();r.default=d},{"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,debug:156}],3:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/core-js/get-iterator"),i=n(o),a=e("babel-runtime/core-js/promise"),s=n(a),c=e("babel-runtime/helpers/classCallCheck"),l=n(c),u=e("babel-runtime/helpers/createClass"),d=n(u),f=e("bowser"),p=n(f),h=e("../Logger"),m=n(h),v=e("../utils"),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),b=e("../Client"),y=n(b),g=new m.default("Room"),w=1e3,k=function(){function e(r){(0,l.default)(this,e),this.config=r,this.state={peers:{},localStream:null,localVideoResolution:null,multipleWebcams:!1,webcamType:null,connectionState:null,remoteStreams:{},showStats:!1,stats:null,activeSpeakerId:null},this._client=null,this._statsTimer=null,t.ROOM=this,this._runClient()}return(0,d.default)(e,[{key:"handleLocalMute",value:function(e){g.debug("handleLocalMute() [value:%s]",e);var t=this.state.localStream.getAudioTracks()[0];return t?(t.enabled=!e,s.default.resolve()):s.default.reject(new Error("no audio track"))}},{key:"handleLocalWebcamToggle",value:function(e){var t=this;return g.debug("handleLocalWebcamToggle() [value:%s]",e),s.default.resolve().then(function(){return e?t._client.addVideo():t._client.removeVideo()}).then(function(){t.state.localStream})}},{key:"handleLocalWebcamChange",value:function(){g.debug("handleLocalWebcamChange()"),this._client.changeWebcam()}},{key:"handleLocalResolutionChange",value:function(){if(g.debug("handleLocalResolutionChange()"),!_.canChangeResolution())return void g.warn("changing local resolution not implemented for this browser");this._client.changeVideoResolution()}},{key:"handleStatsClose",value:function(){g.debug("handleStatsClose()"),this.state.showStats=!1,this._stopStats()}},{key:"handleClickShowStats",value:function(){g.debug("handleClickShowStats()"),this.state.showStats=!0,this._startStats()}},{key:"handleDisableRemoteVideo",value:function(e){return g.debug('handleDisableRemoteVideo() [msid:"%s"]',e),this._client.disableRemoteVideo(e)}},{key:"handleEnableRemoteVideo",value:function(e){return g.debug('handleEnableRemoteVideo() [msid:"%s"]',e),this._client.enableRemoteVideo(e)}},{key:"_runClient",value:function(){var e=this,r=this.config.peerId,n=this.config.roomId;g.debug('_runClient() [peerId:"%s", roomId:"%s"]',r,n),this._client=new y.default(this.config),this._client.on("localstream",function(r,n){e.state.localStream=r,e.state.localVideoResolution=n,t.emitter.emit("localstream",r)}),this._client.on("join",function(){e.state.remoteStreams={},_.isDesktop()&&!p.default.msedge&&(e.state.showStats=!0,setTimeout(function(){e._startStats()},w/2),t.emitter.emit("join",null))}),this._client.on("close",function(r){e.state.remoteStreams={},e.state.activeSpeakerId=null,e._stopStats(),t.emitter.emit("close",r)}),this._client.on("disconnected",function(){e.state.remoteStreams={},e._stopStats(),t.emitter.emit("disconnected",null)}),this._client.on("numwebcams",function(r){e.state.multipleWebcams=r>1,t.emitter.emit("numwebcams",r)}),this._client.on("webcamtype",function(r){e.state.webcamType=r,t.emitter.emit("webcamtype",r)}),this._client.on("peers",function(r){var n={},o=!0,a=!1,s=void 0;try{for(var c,l=(0,i.default)(r);!(o=(c=l.next()).done);o=!0){var u=c.value;n[u.id]=u}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}e.state.peers=n,t.emitter.emit("peers",r)}),this._client.on("addpeer",function(r){var n=e.state.peers;n[r.id]=r,e.state.peers=n,t.emitter.emit("addpeer",r.id)}),this._client.on("updatepeer",function(r){var n=e.state.peers;n[r.id]=r,e.state.peers=n,t.emitter.emit("updatepeer",r)}),this._client.on("removepeer",function(r){var n=e.state.peers;if(r=n[r.id]){delete n[r.id];var o=e.state.remoteStreams,a=!0,s=!1,c=void 0;try{for(var l,u=(0,i.default)(r.msids);!(a=(l=u.next()).done);a=!0){delete o[l.value]}}catch(e){s=!0,c=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}e.state.peers=n,e.state.remoteStreams=o,t.emitter.emit("removepeer",r)}}),this._client.on("connectionstate",function(r){e.state.connectionState=r,t.emitter.emit("connectionstate",r)}),this._client.on("addstream",function(r){var n=e.state.remoteStreams;n[r.jitsiRemoteId||r.id]=r,e.state.remoteStreams=n,t.emitter.emit("addstream",r)}),this._client.on("removestream",function(r){var n=e.state.remoteStreams;delete n[r.jitsiRemoteId||r.id],e.state.remoteStreams=n,t.emitter.emit("removestream",r)}),this._client.on("addtrack",function(){var r=e.state.remoteStreams;e.state.remoteStreams=r,t.emitter.emit("addtrack",null)}),this._client.on("removetrack",function(){var r=e.state.remoteStreams;e.state.remoteStreams=r,t.emitter.emit("removetrack",null)}),this._client.on("forcestreamsupdate",function(){t.emitter.emit("forcestreamsupdate",null)}),this._client.on("activespeaker",function(r){e.state.activeSpeakerId=r?r.id:null,t.emitter.emit("activespeaker",r)})}},{key:"_startStats",value:function(){function e(){var t=this;this._client.getStats().then(function(r){t.state.stats=r,t._statsTimer=setTimeout(function(){e.call(t)},w)}).catch(function(e){g.error("getStats() failed: %o",e),t.state.stats=null})}g.debug("_startStats()"),e.call(this)}},{key:"_stopStats",value:function(){g.debug("_stopStats()"),this.state.stats=null,clearTimeout(this._statsTimer)}}]),e}();r.default=k}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../Client":1,"../Logger":2,"../utils":10,"babel-runtime/core-js/get-iterator":12,"babel-runtime/core-js/promise":21,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,bowser:31}],4:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/core-js/set"),a=o(i),s=e("babel-runtime/core-js/object/keys"),c=o(s),l=e("babel-runtime/helpers/slicedToArray"),u=o(l),d=e("babel-runtime/core-js/promise"),f=o(d),p=e("babel-runtime/core-js/array/from"),h=o(p),m=e("babel-runtime/core-js/get-iterator"),v=o(m),_=e("babel-runtime/core-js/map"),b=o(_),y=e("babel-runtime/core-js/object/get-prototype-of"),g=o(y),w=e("babel-runtime/helpers/classCallCheck"),k=o(w),x=e("babel-runtime/helpers/createClass"),j=o(x),S=e("babel-runtime/helpers/possibleConstructorReturn"),C=o(S),T=e("babel-runtime/helpers/inherits"),E=o(T),R=e("yaeti"),P=o(R),O=e("../Logger"),I=o(O),M=e("./RTCSessionDescription"),F=o(M),L=e("../utils"),A=n(L),N=e("./ortcUtils"),D=n(N),W=e("./errors"),V=new I.default("edge/RTCPeerConnection"),q={stable:"stable",haveLocalOffer:"have-local-offer",haveRemoteOffer:"have-remote-offer",closed:"closed"},G={new:"new",gathering:"gathering",complete:"complete"},z="jitsi-ortc-cname-"+A.randomNumber(),B=function(e){function t(e){(0,k.default)(this,t);var r=(0,C.default)(this,(t.__proto__||(0,g.default)(t)).call(this));return V.debug("constructor() pcConfig:",e),r._bufferedIceCandidates=[],r._closed=!1,r._dtlsTransport=null,r._iceGatherer=null,r._iceGatheringState=G.new,r._iceTransport=null,r._localCapabilities=null,r._localDescription=null,r._localTrackInfos=new b.default,r._mids=new b.default,r._remoteDescription=null,r._remoteStreams=new b.default,r._remoteTrackInfos=new b.default,r._sdpGlobalFields={id:A.randomNumber(),version:0},r._signalingState=q.stable,r._setIceGatherer(e),r._setIceTransport(r._iceGatherer),r._setDtlsTransport(r._iceTransport),r}return(0,E.default)(t,e),(0,j.default)(t,[{key:"addIceCandidate",value:function(e){var t=void 0,r=void 0,n=void 0;if(!e)throw new TypeError("candidate missing");if(0==(arguments.length<=1?0:arguments.length-1))t=!0;else{if(t=!1,r=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2],"function"!=typeof r)throw new TypeError("callback missing");if("function"!=typeof n)throw new TypeError("errback missing")}if(V.debug("addIceCandidate() candidate:",e),t)return this._addIceCandidate(e);this._addIceCandidate(e).then(function(){return r()}).catch(function(e){return n(e)})}},{key:"addStream",value:function(e){V.debug("addStream()"),this._addStream(e)}},{key:"close",value:function(){if(!this._closed){this._closed=!0,V.debug("close()"),this._updateAndEmitSignalingStateChange(q.closed);try{this._iceGatherer.close()}catch(e){V.warn("iceGatherer.close() failed:"+e)}try{this._iceTransport.stop()}catch(e){V.warn("iceTransport.stop() failed:"+e)}try{this._dtlsTransport.stop()}catch(e){V.warn("dtlsTransport.stop() failed:"+e)}var e=!0,t=!1,r=void 0;try{for(var n,o=(0,v.default)(this._localTrackInfos.values());!(e=(n=o.next()).done);e=!0){var i=n.value,a=i.rtpSender;try{a.stop()}catch(e){V.warn("rtpSender.stop() failed:"+e)}}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}this._localTrackInfos.clear();var s=!0,c=!1,l=void 0;try{for(var u,d=(0,v.default)(this._remoteTrackInfos.values());!(s=(u=d.next()).done);s=!0){var f=u.value,p=f.rtpReceiver;try{p.stop()}catch(e){V.warn("rtpReceiver.stop() failed:"+e)}}}catch(e){c=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw l}}this._remoteTrackInfos.clear(),this._remoteStreams.clear()}}},{key:"createAnswer",value:function(){var e=void 0,t=void 0,r=void 0,n=void 0;if(arguments.length<=1)e=!0,t=arguments.length<=0?void 0:arguments[0];else{if(e=!1,r=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],t=arguments.length<=2?void 0:arguments[2],"function"!=typeof r)throw new TypeError("callback missing");if("function"!=typeof n)throw new TypeError("errback missing")}if(V.debug("createAnswer() options:",t),e)return this._createAnswer(t);this._createAnswer(t).then(function(e){return r(e)}).catch(function(e){return n(e)})}},{key:"createDataChannel",value:function(){throw V.debug("createDataChannel()"),new Error("createDataChannel() not supported in Edge")}},{key:"createOffer",value:function(){var e=void 0,t=void 0,r=void 0,n=void 0;if(arguments.length<=1)e=!0,t=arguments.length<=0?void 0:arguments[0];else{if(e=!1,r=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],t=arguments.length<=2?void 0:arguments[2],"function"!=typeof r)throw new TypeError("callback missing");if("function"!=typeof n)throw new TypeError("errback missing")}if(V.debug("createOffer() options:",t),e)return this._createOffer(t);this._createOffer(t).then(function(e){return r(e)}).catch(function(e){return n(e)})}},{key:"getLocalStreams",value:function(){return(0,h.default)(this._localTrackInfos.values()).map(function(e){return e.stream}).filter(function(e,t,r){return r.indexOf(e)===t})}},{key:"getRemoteStreams",value:function(){return(0,h.default)(this._remoteStreams.values())}},{key:"getStats",value:function(){var e=void 0,t=void 0,r=void 0,n=void 0;if(arguments.length<=1)e=!0,t=arguments.length<=0?void 0:arguments[0];else{if(e=!1,2===arguments.length?(r=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1]):(t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]),"function"!=typeof r)throw new TypeError("callback missing");if("function"!=typeof n)throw new TypeError("errback missing")}if(V.debug("getStats()"),e)return this._getStats(t);this._getStats(t).then(function(e){return r(e)}).catch(function(e){return n(e)})}},{key:"removeStream",value:function(e){V.debug("removeStream()"),this._removeStream(e)}},{key:"setLocalDescription",value:function(e){var t=void 0,r=void 0,n=void 0;if(!e)throw new TypeError("description missing");if(0==(arguments.length<=1?0:arguments.length-1))t=!0;else{if(t=!1,r=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2],"function"!=typeof r)throw new TypeError("callback missing");if("function"!=typeof n)throw new TypeError("errback missing")}if(V.debug("setLocalDescription() desc:",e),t)return this._setLocalDescription(e);this._setLocalDescription(e).then(function(){return r()}).catch(function(e){return n(e)})}},{key:"setRemoteDescription",value:function(e){var t=void 0,r=void 0,n=void 0;if(!e)throw new TypeError("description missing");if(0==(arguments.length<=1?0:arguments.length-1))t=!0;else{if(t=!1,r=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2],"function"!=typeof r)throw new TypeError("callback missing");if("function"!=typeof n)throw new TypeError("errback missing")}if(V.debug("setRemoteDescription() desc:",e),t)return this._setRemoteDescription(e);this._setRemoteDescription(e).then(function(){return r()}).catch(function(e){return n(e)})}},{key:"_addIceCandidate",value:function(e){return this._closed?f.default.reject(new W.InvalidStateError("RTCPeerConnection closed")):f.default.reject(new Error("addIceCandidate() not supported"))}},{key:"_addStream",value:function(e){if(this._closed)throw new W.InvalidStateError("RTCPeerConnection closed");var t=!0,r=!1,n=void 0;try{for(var o,i=(0,v.default)(e.getTracks());!(t=(o=i.next()).done);t=!0){var a=o.value;if("ended"!==a.readyState)if(this._localTrackInfos.has(a.id))V.warn("ignoring already handled MediaStreamTrack");else{var s=new RTCRtpSender(a,this._dtlsTransport);this._localTrackInfos.set(a.id,{rtpSender:s,stream:e})}else V.warn("ignoring ended MediaStreamTrack")}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}var c=!0,l=!1,d=void 0;try{for(var f,p=(0,v.default)(this._localTrackInfos);!(c=(f=p.next()).done);c=!0){var h=(0,u.default)(f.value,2),m=h[0],_=h[1],b=_.rtpSender.track;if("ended"===b.readyState){V.debug("_addStream() an already handled track was stopped, track.id:"+b.id);try{_.rtpSender.stop()}catch(e){V.warn("rtpSender.stop() failed:"+e)}this._localTrackInfos.delete(b.id)}else if(_.stream===e&&!e.getTrackById(m)){V.debug("_addStream() a track in this stream was removed, track.id:"+m);try{_.rtpSender.stop()}catch(e){V.warn("rtpSender.stop() failed:"+e)}this._localTrackInfos.delete(b.id)}}}catch(e){l=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(l)throw d}}this._emitNegotiationNeeded()}},{key:"_createAnswer",value:function(e){if(this._closed)return f.default.reject(new W.InvalidStateError("RTCPeerConnection closed"));if(this.signalingState!==q.haveRemoteOffer)return f.default.reject(new W.InvalidStateError('invalid signalingState "'+this.signalingState+'"'));var t=this._createLocalDescription("answer");return f.default.resolve(t)}},{key:"_createLocalDescription",value:function(e){function t(t,i){var u={};switch(u.type=i,i){case"audio":case"video":u.protocol="RTP/SAVPF",u.port=9,u.direction="sendrecv";break;case"application":u.protocol="DTLS/SCTP",u.port=0,u.payloads="0",u.direction="inactive"}u.connection={ip:"127.0.0.1",version:4},u.mid=t,u.iceUfrag=n.usernameFragment,u.icePwd=n.password,u.candidates=[];var f=!0,p=!1,h=void 0;try{for(var m,_=(0,v.default)(o);!(f=(m=_.next()).done);f=!0){var b=m.value,y={};y.component=1,y.foundation=b.foundation,y.ip=b.ip,y.port=b.port,y.priority=b.priority,y.transport=b.protocol.toLowerCase(),y.type=b.type,"tcp"===y.transport&&(y.tcptype=b.tcpType),u.candidates.push(y)}}catch(e){p=!0,h=e}finally{try{!f&&_.return&&_.return()}finally{if(p)throw h}}if(u.endOfCandidates="end-of-candidates",u.setup="offer"===e?"actpass":"server"===a.role?"active":"passive","audio"===i||"video"===i){u.rtp=[],u.rtcpFb=[],u.fmtp=[];var g=[],w=!0,k=!1,x=void 0;try{for(var j,S=(0,v.default)(s.codecs);!(w=(j=S.next()).done);w=!0){var C=j.value;if(!C.kind||C.kind===i){g.push(C.preferredPayloadType);var T={codec:C.name,payload:C.preferredPayloadType,rate:C.clockRate};if(C.numChannels>1&&(T.encoding=C.numChannels),u.rtp.push(T),C.parameters){var E={config:"",payload:C.preferredPayloadType},R=!0,P=!1,O=void 0;try{for(var I,M=(0,v.default)((0,c.default)(C.parameters));!(R=(I=M.next()).done);R=!0){var F=I.value;E.config&&(E.config+=";"),E.config+=F+"="+C.parameters[F]}}catch(e){P=!0,O=e}finally{try{!R&&M.return&&M.return()}finally{if(P)throw O}}E.config&&u.fmtp.push(E)}var L=!0,N=!1,D=void 0;try{for(var W,V=(0,
v.default)(C.rtcpFeedback||[]);!(L=(W=V.next()).done);L=!0){var q=W.value;u.rtcpFb.push({payload:C.preferredPayloadType,subtype:q.parameter||void 0,type:q.type})}}catch(e){N=!0,D=e}finally{try{!L&&V.return&&V.return()}finally{if(N)throw D}}}}}catch(e){k=!0,x=e}finally{try{!w&&S.return&&S.return()}finally{if(k)throw x}}0===g.length?(u.payloads="9",u.port=0,u.direction="inactive"):u.payloads=g.join(" "),u.ssrcs=[],u.ssrcGroups=[];var G=!0,B=!1,U=void 0;try{for(var J,H=(0,v.default)(l.values());!(G=(J=H.next()).done);G=!0){var $=J.value,Z=$.rtpSender,K=$.stream.id,Y=Z.track;if("ended"!==Y.readyState&&Y.kind===i){$.ssrc||($.ssrc=A.randomNumber());var X=d&&"video"===Y.kind;X&&!$.rtxSsrc&&($.rtxSsrc=$.ssrc+1),u.ssrcs.push({attribute:"cname",id:$.ssrc,value:z}),u.ssrcs.push({attribute:"msid",id:$.ssrc,value:K+" "+Y.id}),u.ssrcs.push({attribute:"mslabel",id:$.ssrc,value:K}),u.ssrcs.push({attribute:"label",id:$.ssrc,value:Y.id}),X&&(u.ssrcs.push({attribute:"cname",id:$.rtxSsrc,value:z}),u.ssrcs.push({attribute:"msid",id:$.rtxSsrc,value:K+" "+Y.id}),u.ssrcs.push({attribute:"mslabel",id:$.rtxSsrc,value:K}),u.ssrcs.push({attribute:"label",id:$.rtxSsrc,value:Y.id}),u.ssrcGroups.push({semantics:"FID",ssrcs:$.ssrc+" "+$.rtxSsrc}))}}}catch(e){B=!0,U=e}finally{try{!G&&H.return&&H.return()}finally{if(B)throw U}}u.ext=[];var Q=!0,ee=!1,te=void 0;try{for(var re,ne=(0,v.default)(s.headerExtensions);!(Q=(re=ne.next()).done);Q=!0){var oe=re.value;oe.kind&&oe.kind!==i||u.ext.push({value:oe.preferredId,uri:oe.uri})}}catch(e){ee=!0,te=e}finally{try{!Q&&ne.return&&ne.return()}finally{if(ee)throw te}}u.rtcpMux="rtcp-mux",u.rtcpRsize="rtcp-rsize"}r.media.push(u)}var r={},n=this._iceGatherer.getLocalParameters(),o=this._iceGatherer.getLocalCandidates(),i=this._dtlsTransport.getLocalParameters(),a=this._dtlsTransport.getRemoteParameters(),s=this._localCapabilities,l=this._localTrackInfos;"offer"===e&&this._sdpGlobalFields.version++,r.version=0,r.origin={address:"127.0.0.1",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"jitsi-ortc-webrtc-shim"},r.name="-",r.timing={start:0,stop:0},r.msidSemantic={semantic:"WMS",token:"*"},r.groups=[{mids:(0,h.default)(this._mids.keys()).join(" "),type:"BUNDLE"}],r.media=[],r.fingerprint={hash:i.fingerprints[0].value,type:i.fingerprints[0].algorithm};var d=!1,f=!0,p=!1,m=void 0;try{for(var _,b=(0,v.default)(s.codecs);!(f=(_=b.next()).done);f=!0){var y=_.value;if("video"===y.kind&&"rtx"===y.name){d=!0;break}}}catch(e){p=!0,m=e}finally{try{!f&&b.return&&b.return()}finally{if(p)throw m}}var g=!0,w=!1,k=void 0;try{for(var x,j=(0,v.default)(this._mids);!(g=(x=j.next()).done);g=!0){var S=(0,u.default)(x.value,2),C=S[0],T=S[1];t.call(this,C,T)}}catch(e){w=!0,k=e}finally{try{!g&&j.return&&j.return()}finally{if(w)throw k}}var E=new F.default({type:e,_sdpObject:r});return V.debug("_createLocalDescription():",E),E}},{key:"_createOffer",value:function(e){function t(e,t){var i={};switch(i.type=t,t){case"audio":case"video":i.protocol="RTP/SAVPF",i.port=9,i.direction="sendrecv";break;case"application":i.protocol="DTLS/SCTP",i.port=0,i.payloads="0",i.direction="inactive"}i.connection={ip:"127.0.0.1",version:4},i.mid=e,i.iceUfrag=n.usernameFragment,i.icePwd=n.password,i.candidates=[];var l=!0,u=!1,f=void 0;try{for(var p,h=(0,v.default)(o);!(l=(p=h.next()).done);l=!0){var m=p.value,_={};_.component=1,_.foundation=m.foundation,_.ip=m.ip,_.port=m.port,_.priority=m.priority,_.transport=m.protocol.toLowerCase(),_.type=m.type,"tcp"===_.transport&&(_.tcptype=m.tcpType),i.candidates.push(_)}}catch(e){u=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw f}}if(i.endOfCandidates="end-of-candidates",i.setup="actpass","audio"===t||"video"===t){i.rtp=[],i.rtcpFb=[],i.fmtp=[];var b=[],y=!0,g=!1,w=void 0;try{for(var k,x=(0,v.default)(a.codecs);!(y=(k=x.next()).done);y=!0){var j=k.value;if(!j.kind||j.kind===t){b.push(j.preferredPayloadType);var S={codec:j.name,payload:j.preferredPayloadType,rate:j.clockRate};if(j.numChannels>1&&(S.encoding=j.numChannels),i.rtp.push(S),j.parameters){var C={config:"",payload:j.preferredPayloadType},T=!0,E=!1,R=void 0;try{for(var P,O=(0,v.default)((0,c.default)(j.parameters));!(T=(P=O.next()).done);T=!0){var I=P.value;C.config&&(C.config+=";"),C.config+=I+"="+j.parameters[I]}}catch(e){E=!0,R=e}finally{try{!T&&O.return&&O.return()}finally{if(E)throw R}}C.config&&i.fmtp.push(C)}var M=!0,F=!1,L=void 0;try{for(var N,D=(0,v.default)(j.rtcpFeedback||[]);!(M=(N=D.next()).done);M=!0){var W=N.value;i.rtcpFb.push({payload:j.preferredPayloadType,subtype:W.parameter||void 0,type:W.type})}}catch(e){F=!0,L=e}finally{try{!M&&D.return&&D.return()}finally{if(F)throw L}}}}}catch(e){g=!0,w=e}finally{try{!y&&x.return&&x.return()}finally{if(g)throw w}}0===b.length?(i.payloads="9",i.port=0,i.direction="inactive"):i.payloads=b.join(" "),i.ssrcs=[],i.ssrcGroups=[];var V=!0,q=!1,G=void 0;try{for(var B,U=(0,v.default)(s.values());!(V=(B=U.next()).done);V=!0){var J=B.value,H=J.rtpSender,$=J.stream.id,Z=H.track;if("ended"!==Z.readyState&&Z.kind===t){J.ssrc||(J.ssrc=A.randomNumber());var K=d&&"video"===Z.kind;K&&!J.rtxSsrc&&(J.rtxSsrc=J.ssrc+1),i.ssrcs.push({attribute:"cname",id:J.ssrc,value:z}),i.ssrcs.push({attribute:"msid",id:J.ssrc,value:$+" "+Z.id}),i.ssrcs.push({attribute:"mslabel",id:J.ssrc,value:$}),i.ssrcs.push({attribute:"label",id:J.ssrc,value:Z.id}),K&&(i.ssrcs.push({attribute:"cname",id:J.rtxSsrc,value:z}),i.ssrcs.push({attribute:"msid",id:J.rtxSsrc,value:$+" "+Z.id}),i.ssrcs.push({attribute:"mslabel",id:J.rtxSsrc,value:$}),i.ssrcs.push({attribute:"label",id:J.rtxSsrc,value:Z.id}),i.ssrcGroups.push({semantics:"FID",ssrcs:J.ssrc+" "+J.rtxSsrc}))}}}catch(e){q=!0,G=e}finally{try{!V&&U.return&&U.return()}finally{if(q)throw G}}i.ext=[];var Y=!0,X=!1,Q=void 0;try{for(var ee,te=(0,v.default)(a.headerExtensions);!(Y=(ee=te.next()).done);Y=!0){var re=ee.value;re.kind&&re.kind!==t||i.ext.push({value:re.preferredId,uri:re.uri})}}catch(e){X=!0,Q=e}finally{try{!Y&&te.return&&te.return()}finally{if(X)throw Q}}i.rtcpMux="rtcp-mux",i.rtcpRsize="rtcp-rsize"}r.media.push(i)}if(this._closed)return f.default.reject(new W.InvalidStateError("RTCPeerConnection closed"));if(this.signalingState!==q.stable)return f.default.reject(new W.InvalidStateError('invalid signalingState "'+this.signalingState+'"'));var r={},n=this._iceGatherer.getLocalParameters(),o=this._iceGatherer.getLocalCandidates(),i=this._dtlsTransport.getLocalParameters(),a=RTCRtpReceiver.getCapabilities(),s=this._localTrackInfos,l=new b.default([["audio","audio"],["video","video"]]);r.version=0,r.origin={address:"127.0.0.1",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"jitsi-ortc-webrtc-shim"},r.name="-",r.timing={start:0,stop:0},r.msidSemantic={semantic:"WMS",token:"*"},r.groups=[{mids:(0,h.default)(l.keys()).join(" "),type:"BUNDLE"}],r.media=[],r.fingerprint={hash:i.fingerprints[0].value,type:i.fingerprints[0].algorithm};var d=!1,p=!0,m=!1,_=void 0;try{for(var y,g=(0,v.default)(a.codecs);!(p=(y=g.next()).done);p=!0){var w=y.value;if("video"===w.kind&&"rtx"===w.name){d=!0;break}}}catch(e){m=!0,_=e}finally{try{!p&&g.return&&g.return()}finally{if(m)throw _}}var k=!0,x=!1,j=void 0;try{for(var S,C=(0,v.default)(l);!(k=(S=C.next()).done);k=!0){var T=(0,u.default)(S.value,2),E=T[0],R=T[1];t.call(this,E,R)}}catch(e){x=!0,j=e}finally{try{!k&&C.return&&C.return()}finally{if(x)throw j}}var P=new F.default({type:"offer",_sdpObject:r});return V.debug("_createLocalDescription():",P),f.default.resolve(P)}},{key:"_emitAddStream",value:function(e){if(!this._closed){V.debug('emitting "addstream"');var t=new P.default.Event("addstream");t.stream=e,this.dispatchEvent(t)}}},{key:"_emitBufferedIceCandidates",value:function(){if(!this._closed){var e=!0,t=!1,r=void 0;try{for(var n,o=(0,v.default)(this._bufferedIceCandidates);!(e=(n=o.next()).done);e=!0){var i=n.value;if(i){i.sdpMIndex=this._mids.keys().next().value,V.debug('emitting buffered "icecandidate", candidate:',i);var a=new P.default.Event("icecandidate");a.candidate=i,this.dispatchEvent(a)}}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}this._bufferedIceCandidates=[]}}},{key:"_emitConnectionStateChange",value:function(){if(!this._closed||"closed"===this.connectionState){V.debug('emitting "connectionstatechange", connectionState:',this.connectionState);var e=new P.default.Event("connectionstatechange");this.dispatchEvent(e)}}},{key:"_emitIceCandidate",value:function(e){if(!this._closed){var t=null;if(e){var r=this._mids.keys().next().value,n="candidate:"+e.foundation+" 1 "+e.protocol+" "+e.priority+" "+e.ip+" "+e.port+" typ "+e.type;e.relatedAddress&&(n+=" raddr "+e.relatedAddress),e.relatedPort&&(n+=" rport "+e.relatedPort),"tcp"===e.protocol&&(n+=" tcptype "+e.tcpType),t={candidate:n,component:1,foundation:e.foundation,ip:e.ip,port:e.port,priority:e.priority,protocol:e.protocol,type:e.type,sdpMIndex:r,sdpMLineIndex:0},"tcp"===e.protocol&&(t.tcptype=e.tcpType),e.relatedAddress&&(t.relatedAddress=e.relatedAddress),e.relatedPort&&(t.relatedPort=e.relatedPort)}if(this._localDescription){V.debug('emitting "icecandidate", candidate:',t);var o=new P.default.Event("icecandidate");o.candidate=t,this.dispatchEvent(o)}else V.debug("buffering gathered ICE candidate:",t),this._bufferedIceCandidates.push(t)}}},{key:"_emitIceConnectionStateChange",value:function(){if(!this._closed||"closed"===this.iceConnectionState){V.debug('emitting "iceconnectionstatechange", iceConnectionState:',this.iceConnectionState);var e=new P.default.Event("iceconnectionstatechange");this.dispatchEvent(e)}}},{key:"_emitNegotiationNeeded",value:function(){if(this.signalingState===q.stable){V.debug('emitting "negotiationneeded"');var e=new P.default.Event("negotiationneeded");this.dispatchEvent(e)}}},{key:"_emitRemoveStream",value:function(e){if(!this._closed){V.debug('emitting "removestream"');var t=new P.default.Event("removestream");t.stream=e,this.dispatchEvent(t)}}},{key:"_getParametersForRtpReceiver",value:function(e,t){var r=t.ssrc,n=t.rtxSsrc,o=t.cname,i=this._localCapabilities,a={codecs:[],degradationPreference:"balanced",encodings:[],headerExtensions:[],muxId:"",rtcp:{cname:o,compound:!0,mux:!0,reducedSize:!0}},s=[],c=void 0,l=!0,u=!1,d=void 0;try{for(var f,p=(0,v.default)(i.codecs);!(l=(f=p.next()).done);l=!0){var h=f.value;if(h.kind===e&&"rtx"!==h.name){c=h.preferredPayloadType,s.push({clockRate:h.clockRate,maxptime:h.maxptime,mimeType:h.mimeType,name:h.name,numChannels:h.numChannels,parameters:h.parameters,payloadType:h.preferredPayloadType,ptime:h.ptime,rtcpFeedback:h.rtcpFeedback});break}}}catch(e){u=!0,d=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw d}}if(n){var m=!0,_=!1,b=void 0;try{for(var y,g=(0,v.default)(i.codecs);!(m=(y=g.next()).done);m=!0){var w=y.value;if(w.kind===e&&"rtx"===w.name){s.push({clockRate:w.clockRate,mimeType:w.mimeType,name:"rtx",parameters:w.parameters,payloadType:w.preferredPayloadType,rtcpFeedback:w.rtcpFeedback});break}}}catch(e){_=!0,b=e}finally{try{!m&&g.return&&g.return()}finally{if(_)throw b}}}a.codecs=s;var k={active:!0,codecPayloadType:c,ssrc:r};n&&(k.rtx={ssrc:n}),a.encodings.push(k);var x=!0,j=!1,S=void 0;try{for(var C,T=(0,v.default)(i.headerExtensions);!(x=(C=T.next()).done);x=!0){var E=C.value;E.kind===e&&a.headerExtensions.push({encrypt:E.preferredEncrypt,id:E.preferredId,uri:E.uri})}}catch(e){j=!0,S=e}finally{try{!x&&T.return&&T.return()}finally{if(j)throw S}}return a}},{key:"_getParametersForRtpSender",value:function(e,t){var r=t.ssrc,n=t.rtxSsrc,o=z,i=this._localCapabilities,a={codecs:[],degradationPreference:"balanced",encodings:[],headerExtensions:[],muxId:"",rtcp:{cname:o,compound:!0,mux:!0,reducedSize:!0}},s=[],c=void 0,l=!0,u=!1,d=void 0;try{for(var f,p=(0,v.default)(i.codecs);!(l=(f=p.next()).done);l=!0){var h=f.value;if(h.kind===e&&"rtx"!==h.name){c=h.preferredPayloadType,s.push({clockRate:h.clockRate,maxptime:h.maxptime,mimeType:h.mimeType,name:h.name,numChannels:h.numChannels,parameters:h.parameters,payloadType:h.preferredPayloadType,ptime:h.ptime,rtcpFeedback:h.rtcpFeedback});break}}}catch(e){u=!0,d=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw d}}if(n){var m=!0,_=!1,b=void 0;try{for(var y,g=(0,v.default)(i.codecs);!(m=(y=g.next()).done);m=!0){var w=y.value;if(w.kind===e&&"rtx"===w.name){s.push({clockRate:w.clockRate,mimeType:w.mimeType,name:"rtx",parameters:w.parameters,payloadType:w.preferredPayloadType,rtcpFeedback:w.rtcpFeedback});break}}}catch(e){_=!0,b=e}finally{try{!m&&g.return&&g.return()}finally{if(_)throw b}}}a.codecs=s;var k={active:!0,codecPayloadType:c,ssrc:r};n&&(k.rtx={ssrc:n}),a.encodings.push(k);var x=!0,j=!1,S=void 0;try{for(var C,T=(0,v.default)(i.headerExtensions);!(x=(C=T.next()).done);x=!0){var E=C.value;E.kind===e&&a.headerExtensions.push({encrypt:E.preferredEncrypt,id:E.preferredId,uri:E.uri})}}catch(e){j=!0,S=e}finally{try{!x&&T.return&&T.return()}finally{if(j)throw S}}return a}},{key:"_getStats",value:function(e){return this._closed?f.default.reject(new W.InvalidStateError("RTCPeerConnection closed")):f.default.reject(new Error("getStats() not yet implemented"))}},{key:"_handleLocalInitialAnswer",value:function(e){V.debug("_handleLocalInitialAnswer(), desc:",e);var t=e.sdpObject;this._localCapabilities=D.extractCapabilities(t),V.debug("local capabilities:",this._localCapabilities)}},{key:"_handleLocalReAnswer",value:function(e){V.debug("_handleLocalReAnswer(), desc:",e);var t=e.sdpObject;this._localCapabilities=D.extractCapabilities(t),V.debug("local capabilities:",this._localCapabilities)}},{key:"_handleRemoteInitialOffer",value:function(e){V.debug("_handleRemoteInitialOffer(), desc:",e);var t=e.sdpObject;this._mids=D.extractMids(t);var r=D.extractCapabilities(t);V.debug("remote capabilities:",r),this._localCapabilities=D.getLocalCapabilities(r),this._startIceAndDtls(e)}},{key:"_handleRemoteReOffer",value:function(e){V.debug("_handleRemoteReOffer(), desc:",e);var t=e.sdpObject;this._mids=D.extractMids(t);var r=D.extractCapabilities(t);V.debug("remote capabilities:",r),this._localCapabilities=D.getLocalCapabilities(r)}},{key:"_receiveMedia",value:function(){V.debug("_receiveMedia()");var e=new a.default(this._remoteTrackInfos.keys()),t=D.extractTrackInfos(this._remoteDescription.sdpObject),r=new b.default,n=new b.default,o=new b.default;V.debug("_receiveMedia() remote track infos:",t);var i=!0,s=!1,c=void 0;try{for(var l,d=(0,v.default)(t);!(i=(l=d.next()).done);i=!0){var f=(0,u.default)(l.value,2),p=f[0],h=f[1];if(!e.has(p)){V.debug("_receiveMedia() new remote track, ssrc:"+p),this._remoteTrackInfos.set(p,h);var m=h.kind,_=h.rtxSsrc,y=h.streamId,g=h.trackId,w=h.cname,k=!this._remoteStreams.has(y),x=void 0;k?(V.debug("_receiveMedia() new remote stream, id:"+y),x=new MediaStream,x.jitsiRemoteId=y,r.set(y,x),this._remoteStreams.set(y,x)):x=this._remoteStreams.get(y);var j=new RTCRtpReceiver(this._dtlsTransport,m),S=this._getParametersForRtpReceiver(m,{ssrc:p,rtxSsrc:_,cname:w});h.track=j.track,j.onerror=function(e){V.error('rtpReceiver "error" event, event:'),V.error(e)},h.stream=x,h.rtpReceiver=j,V.debug("calling rtpReceiver.receive(), parameters:",S);try{j.receive(S);var C=h.track;C.jitsiRemoteId=g,x.addTrack(C),r.has(y)||n.set(C,x)}catch(e){V.error("rtpReceiver.receive() failed:"+e.message),V.error(e)}}}}catch(e){s=!0,c=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw c}}var T=!0,E=!1,R=void 0;try{for(var P,O=(0,v.default)(e);!(T=(P=O.next()).done);T=!0){var p=P.value;if(!t.has(p)){V.debug("_receiveMedia() remote track removed, ssrc:"+p);var h=this._remoteTrackInfos.get(p),I=h.stream,M=h.track,F=h.rtpReceiver;try{F.stop()}catch(e){V.warn("rtpReceiver.stop() failed:"+e)}o.set(M,I),I.removeTrack(M),this._remoteTrackInfos.delete(p)}}}catch(e){E=!0,R=e}finally{try{!T&&O.return&&O.return()}finally{if(E)throw R}}var L=!0,A=!1,N=void 0;try{for(var W,q=(0,v.default)(n);!(L=(W=q.next()).done);L=!0){var G=(0,u.default)(W.value,2),z=G[0],B=G[1],U=new Event("addtrack");U.track=z,B.dispatchEvent(U)}}catch(e){A=!0,N=e}finally{try{!L&&q.return&&q.return()}finally{if(A)throw N}}var J=!0,H=!1,$=void 0;try{for(var Z,K=(0,v.default)(o);!(J=(Z=K.next()).done);J=!0){var Y=(0,u.default)(Z.value,2),X=Y[0],Q=Y[1],ee=new Event("removetrack");ee.track=X,Q.dispatchEvent(ee)}}catch(e){H=!0,$=e}finally{try{!J&&K.return&&K.return()}finally{if(H)throw $}}var te=!0,re=!1,ne=void 0;try{for(var oe,ie=(0,v.default)(r.values());!(te=(oe=ie.next()).done);te=!0){var ae=oe.value;0===ae.getTracks().length?(V.warn("ignoring new stream for which no track could be added"),r.delete(ae.jitsiRemoteId),this._remoteStreams.delete(ae.jitsiRemoteId)):this._emitAddStream(ae)}}catch(e){re=!0,ne=e}finally{try{!te&&ie.return&&ie.return()}finally{if(re)throw ne}}var se=!0,ce=!1,le=void 0;try{for(var ue,de=(0,v.default)(this._remoteStreams);!(se=(ue=de.next()).done);se=!0){var fe=(0,u.default)(ue.value,2),pe=fe[0],he=fe[1];he.getTracks().length>0||(this._remoteStreams.delete(pe),this._emitRemoveStream(he))}}catch(e){ce=!0,le=e}finally{try{!se&&de.return&&de.return()}finally{if(ce)throw le}}}},{key:"_removeStream",value:function(e){if(this._closed)throw new W.InvalidStateError("RTCPeerConnection closed");var t=!0,r=!1,n=void 0;try{for(var o,i=(0,v.default)(e.getTracks());!(t=(o=i.next()).done);t=!0){var a=o.value;if(this._localTrackInfos.has(a.id)){var s=this._localTrackInfos.get(a.id).rtpSender;try{s.stop()}catch(e){V.warn("rtpSender.stop() failed:"+e)}this._localTrackInfos.delete(a.id)}}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}this._emitNegotiationNeeded()}},{key:"_sendMedia",value:function(){V.debug("_sendMedia()");var e=!0,t=!1,r=void 0;try{for(var n,o=(0,v.default)(this._localTrackInfos.values());!(e=(n=o.next()).done);e=!0){var i=n.value;if(!i.sending){var a=i.rtpSender,s=i.ssrc,c=i.rtxSsrc,l=a.track,u=l.kind,d=this._getParametersForRtpSender(u,{ssrc:s,rtxSsrc:c});V.debug("calling rtpSender.send(), parameters:",d);try{a.send(d),i.sending=!0}catch(e){V.error("rtpSender.send() failed:"+e.message),V.error(e)}}}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}},{key:"_setDtlsTransport",value:function(e){var t=this,r=new RTCDtlsTransport(e);r.onstatechange=function(){V.debug('dtlsTransport "statechange" event, state:'+r.state),t._emitConnectionStateChange()},r.ondtlsstatechange=function(){V.debug('dtlsTransport "dtlsstatechange" event, state:'+r.state),t._emitConnectionStateChange()},r.onerror=function(e){var r=void 0;e.message?r=e.message:e.error&&(r=e.error.message),V.error('dtlsTransport "error" event, message:'+r),t._emitConnectionStateChange()},this._dtlsTransport=r}},{key:"_setIceGatherer",value:function(e){var t=this,r={gatherPolicy:e.iceTransportPolicy||"all",iceServers:e.iceServers||[]},n=new RTCIceGatherer(r);n.onstatechange=function(){V.debug('iceGatherer "statechange" event, state:'+n.state),t._updateAndEmitIceGatheringStateChange(n.state)},n.onlocalcandidate=function(e){var r=e.candidate,n=e.complete;V.debug('iceGatherer "localcandidate" event, candidate:',r),n||!r||0===(0,c.default)(r).length?(r=null,t._updateAndEmitIceGatheringStateChange(G.complete),t._emitIceCandidate(null)):t._emitIceCandidate(r)},n.onerror=function(e){var t=e.errorCode,r=e.errorText;V.error('iceGatherer "error" event, errorCode:'+t+", errorText:"+r)};try{n.gather()}catch(e){V.warn("iceGatherer.gather() failed:"+e)}this._iceGatherer=n}},{key:"_setIceTransport",value:function(e){var t=this,r=new RTCIceTransport(e);r.onstatechange=function(){V.debug('iceTransport "statechange" event, state:'+r.state),t._emitIceConnectionStateChange()},r.onicestatechange=function(){V.debug('iceTransport "icestatechange" event, state:'+r.state),"completed"===r.state&&V.debug("nominated candidate pair:",r.getNominatedCandidatePair()),t._emitIceConnectionStateChange()},r.oncandidatepairchange=function(e){V.debug('iceTransport "candidatepairchange" event, pair:'+e.pair)},this._iceTransport=r}},{key:"_setLocalDescription",value:function(e){var t=this;if(this._closed)return f.default.reject(new W.InvalidStateError("RTCPeerConnection closed"));var r=void 0;try{r=new F.default(e)}catch(e){return f.default.reject(new TypeError("invalid RTCSessionDescriptionInit: "+e))}switch(e.type){case"offer":return this.signalingState!==q.stable?f.default.reject(new W.InvalidStateError('invalid signalingState "'+this.signalingState+'"')):f.default.reject(new TypeError('setLocalDescription() with type "offer" not supported'));case"answer":if(this.signalingState!==q.haveRemoteOffer)return f.default.reject(new W.InvalidStateError('invalid signalingState "'+this.signalingState+'"'));var n=Boolean(!this._localDescription);return f.default.resolve().then(function(){return n?t._handleLocalInitialAnswer(r):t._handleLocalReAnswer(r)}).then(function(){V.debug("setLocalDescription() succeed"),t._localDescription=r,t._updateAndEmitSignalingStateChange(q.stable),n&&t._emitBufferedIceCandidates(),t._sendMedia(),t._receiveMedia()}).catch(function(e){throw V.error("setLocalDescription() failed: "+e.message),V.error(e),e});default:return f.default.reject(new TypeError('unsupported description.type "'+e.type+'"'))}}},{key:"_setRemoteDescription",value:function(e){var t=this;if(this._closed)return f.default.reject(new W.InvalidStateError("RTCPeerConnection closed"));var r=void 0;try{r=new F.default(e)}catch(e){return f.default.reject(new TypeError("invalid RTCSessionDescriptionInit: "+e))}switch(e.type){case"offer":if(this.signalingState!==q.stable)return f.default.reject(new W.InvalidStateError('invalid signalingState "'+this.signalingState+'"'));var n=Boolean(!this._remoteDescription);return f.default.resolve().then(function(){return n?t._handleRemoteInitialOffer(r):t._handleRemoteReOffer(r)}).then(function(){V.debug("setRemoteDescription() succeed"),t._remoteDescription=r,t._updateAndEmitSignalingStateChange(q.haveRemoteOffer)}).catch(function(e){throw V.error("setRemoteDescription() failed: "+e),e});case"answer":return this.signalingState!==q.haveLocalOffer?f.default.reject(new W.InvalidStateError('invalid signalingState "'+this.signalingState+'"')):f.default.reject(new TypeError('setRemoteDescription() with type "answer" not supported'));default:return f.default.reject(new TypeError('unsupported description.type "'+e.type+'"'))}}},{key:"_startIceAndDtls",value:function(e){var t=e.sdpObject,r=D.extractIceParameters(t),n=D.extractIceCandidates(t),o=D.extractDtlsParameters(t);switch(e.type){case"offer":this._iceTransport.start(this._iceGatherer,r,"controlled");break;case"answer":this._iceTransport.start(this._iceGatherer,r,"controlling")}var i=!0,a=!1,s=void 0;try{for(var c,l=(0,v.default)(n);!(i=(c=l.next()).done);i=!0){var u=c.value;0!==u.port&&9!==u.port&&this._iceTransport.addRemoteCandidate(u)}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}switch(this._iceTransport.addRemoteCandidate({}),e.type){case"offer":o.role="server";break;case"answer":o.role="client"}this._dtlsTransport.start(o)}},{key:"_updateAndEmitIceGatheringStateChange",value:function(e){if(!this._closed&&e!==this.iceGatheringState){this._iceGatheringState=e,V.debug('emitting "icegatheringstatechange", iceGatheringState:',this.iceGatheringState);var t=new P.default.Event("icegatheringstatechange");this.dispatchEvent(t)}}},{key:"_updateAndEmitSignalingStateChange",value:function(e){if(e!==this.signalingState){this._signalingState=e,V.debug('emitting "signalingstatechange", signalingState:',this.signalingState);var t=new P.default.Event("signalingstatechange");this.dispatchEvent(t)}}},{key:"connectionState",get:function(){return this._dtlsTransport.state}},{key:"iceConnectionState",get:function(){return this._iceTransport.state}},{key:"iceGatheringState",get:function(){return this._iceGatheringState}},{key:"localDescription",get:function(){return this._localDescription}},{key:"remoteDescription",get:function(){return this._remoteDescription}},{key:"signalingState",get:function(){return this._signalingState}}]),t}(P.default.EventTarget);r.default=B},{"../Logger":2,"../utils":10,"./RTCSessionDescription":5,"./errors":6,"./ortcUtils":7,"babel-runtime/core-js/array/from":11,"babel-runtime/core-js/get-iterator":12,"babel-runtime/core-js/map":15,"babel-runtime/core-js/object/get-prototype-of":18,"babel-runtime/core-js/object/keys":19,"babel-runtime/core-js/promise":21,"babel-runtime/core-js/set":22,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/helpers/inherits":27,"babel-runtime/helpers/possibleConstructorReturn":28,"babel-runtime/helpers/slicedToArray":29,yaeti:184}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/typeof"),i=n(o),a=e("babel-runtime/helpers/classCallCheck"),s=n(a),c=e("babel-runtime/helpers/createClass"),l=n(c),u=e("sdp-transform"),d=n(u),f=function(){function e(t){switch((0,s.default)(this,e),this._sdp=null,this._sdpObject=null,this._type=null,t.type){case"offer":case"answer":break;default:throw new TypeError('invalid type "'+t.type+'"')}if(this._type=t.type,"string"==typeof t.sdp){this._sdp=t.sdp;try{this._sdpObject=d.default.parse(t.sdp)}catch(e){throw new Error("invalid sdp: "+e)}}else{if("object"!==(0,i.default)(t._sdpObject))throw new TypeError("invalid sdp or _sdpObject");this._sdpObject=t._sdpObject;try{this._sdp=d.default.write(t._sdpObject)}catch(e){throw new Error("invalid sdp object: "+e)}}}return(0,l.default)(e,[{key:"toJSON",value:function(){return{sdp:this._sdp,type:this._type}}},{key:"sdp",get:function(){return this._sdp},set:function(e){try{this._sdpObject=d.default.parse(e)}catch(e){throw new Error("invalid sdp: "+e)}this._sdp=e}},{key:"sdpObject",get:function(){return this._sdpObject}},{key:"type",get:function(){return this._type}}]),e}();r.default=f},{"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/helpers/typeof":30,"sdp-transform":176}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.InvalidStateError=void 0;var o=e("babel-runtime/core-js/object/get-prototype-of"),i=n(o),a=e("babel-runtime/helpers/classCallCheck"),s=n(a),c=e("babel-runtime/helpers/possibleConstructorReturn"),l=n(c),u=e("babel-runtime/helpers/inherits"),d=n(u);r.InvalidStateError=function(e){return function(t){function r(t){(0,s.default)(this,r);var n=(0,l.default)(this,(r.__proto__||(0,i.default)(r)).call(this,t));return Object.defineProperty(n,"name",{value:e}),n}return(0,d.default)(r,t),r}(Error)}("InvalidStateError")},{"babel-runtime/core-js/object/get-prototype-of":18,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/inherits":27,"babel-runtime/helpers/possibleConstructorReturn":28}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=new w.default,r=[],n=!0,o=!1,i=void 0;try{for(var a,s=(0,_.default)(e.media);!(n=(a=s.next()).done);n=!0){var c=a.value,l=c.type;if("audio"===l||"video"===l){var u=!0,d=!1,f=void 0;try{for(var p,h=(0,_.default)(c.rtp);!(u=(p=h.next()).done);u=!0){var m=p.value,v={clockRate:m.rate,kind:l,mimeType:l+"/"+m.codec,name:m.codec,numChannels:m.encoding||1,parameters:{},preferredPayloadType:m.payload,rtcpFeedback:[]};t.set(v.preferredPayloadType,v)}}catch(e){d=!0,f=e}finally{try{!u&&h.return&&h.return()}finally{if(d)throw f}}var b=!0,g=!1,k=void 0;try{for(var j,S=(0,_.default)(c.fmtp||[]);!(b=(j=S.next()).done);b=!0){var C=j.value,T=x.default.parseFmtpConfig(C.config),E=t.get(C.payload);E&&(E.parameters=T)}}catch(e){g=!0,k=e}finally{try{!b&&S.return&&S.return()}finally{if(g)throw k}}var R=!0,P=!1,O=void 0;try{for(var I,M=(0,_.default)(c.rtcpFb||[]);!(R=(I=M.next()).done);R=!0){var F=I.value,L=t.get(F.payload);L&&L.rtcpFeedback.push({parameter:F.subtype||"",type:F.type})}}catch(e){P=!0,O=e}finally{try{!R&&M.return&&M.return()}finally{if(P)throw O}}var A=!0,N=!1,D=void 0;try{for(var W,V=(0,_.default)(c.ext||[]);!(A=(W=V.next()).done);A=!0)!function(){var e=W.value,t=e.value,n=e.uri,o={kind:l,uri:n,preferredId:t};r.find(function(e){return o.kind===e.kind&&o.uri===e.uri})||r.push(o)}()}catch(e){N=!0,D=e}finally{try{!A&&V.return&&V.return()}finally{if(N)throw D}}}}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return{codecs:(0,y.default)(t.values()),fecMechanisms:[],headerExtensions:r}}function i(e){var t=d(e),r=t.fingerprint||e.fingerprint,n=void 0;switch(t.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto"}return{role:n,fingerprints:[{algorithm:r.type,value:r.hash}]}}function a(e){var t=d(e),r=[],n=!0,o=!1,i=void 0;try{for(var a,s=(0,_.default)(t.candidates);!(n=(a=s.next()).done);n=!0){var c=a.value;if(1===c.component){var l={foundation:c.foundation,ip:c.ip,port:c.port,priority:c.priority,protocol:c.transport.toLowerCase(),type:c.type};r.push(l)}}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}function s(e){var t=d(e),r=t.iceUfrag,n=t.icePwd;return{icelite:"ice-lite"===e.icelite,password:n,usernameFragment:r}}function c(e){var t=new w.default,r=!0,n=!1,o=void 0;try{for(var i,a=(0,_.default)(e.media);!(r=(i=a.next()).done);r=!0){var s=i.value;t.set(s.mid,s.type)}}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return t}function l(e){var t=new w.default,r=new w.default,n=new m.default,o=!0,i=!1,a=void 0;try{for(var s,c=(0,_.default)(e.media);!(o=(s=c.next()).done);o=!0){var l=s.value,u=l.type;if("audio"===u||"video"===u){var d=!0,f=!1,p=void 0;try{for(var h,v=(0,_.default)(l.ssrcGroups||[]);!(d=(h=v.next()).done);d=!0){var b=h.value;if("FID"===b.semantics){var y=b.ssrcs.split(" ").map(function(e){return Number(e)}),g=y[0],k=y[1];r.set(g,k),n.add(k)}}}catch(e){f=!0,p=e}finally{try{!d&&v.return&&v.return()}finally{if(f)throw p}}var x=!0,j=!1,S=void 0;try{for(var C,T=(0,_.default)(l.ssrcs||[]);!(x=(C=T.next()).done);x=!0){var E=C.value,R=E.id;if(!n.has(R)){var P=t.get(R);switch(P||(P={kind:u,rtxSsrc:r.get(R),ssrc:R},t.set(R,P)),E.attribute){case"cname":P.cname=E.value;break;case"msid":var O=E.value.split(" "),I=O[0],M=O[1];P.streamId=I,P.trackId=M;break;case"mslabel":var F=E.value;P.streamId=F;break;case"label":var L=E.value;P.trackId=L}}}}catch(e){j=!0,S=e}finally{try{!x&&T.return&&T.return()}finally{if(j)throw S}}}}}catch(e){i=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}return t}function u(e){var t=RTCRtpReceiver.getCapabilities(),r={codecs:[],fecMechanisms:[],headerExtensions:[]},n=new w.default,o=!0,i=!1,a=void 0;try{for(var s,c=(0,_.default)(e.codecs);!(o=(s=c.next()).done);o=!0){(function(){var e=s.value,o=e.name.toLowerCase();if("rtx"===o)return n.set(e.parameters.apt,e.preferredPayloadType),"continue";var i=t.codecs.find(function(t){return t.name.toLowerCase()===o&&t.kind===e.kind&&t.clockRate===e.clockRate});if(!i)return"continue";var a={clockRate:i.clockRate,kind:i.kind,mimeType:i.kind+"/"+i.name,name:i.name,numChannels:i.numChannels||1,parameters:{},preferredPayloadType:e.preferredPayloadType,rtcpFeedback:[]},c=!0,l=!1,u=void 0;try{for(var d,f=(0,_.default)((0,p.default)(e.parameters));!(c=(d=f.next()).done);c=!0){var h=d.value,m=e.parameters[h],v=!0,b=!1,y=void 0;try{for(var g,w=(0,_.default)((0,p.default)(i.parameters));!(v=(g=w.next()).done);v=!0){var k=g.value,x=i.parameters[k];if(k===h&&x===m){a.parameters[k]=x;break}}}catch(e){b=!0,y=e}finally{try{!v&&w.return&&w.return()}finally{if(b)throw y}}}}catch(e){l=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(l)throw u}}var j=!0,S=!1,C=void 0;try{for(var T,E=(0,_.default)(e.rtcpFeedback);!(j=(T=E.next()).done);j=!0)!function(){var e=T.value,t=i.rtcpFeedback.find(function(t){return t.type===e.type&&t.parameter===e.parameter})
;t&&a.rtcpFeedback.push(t)}()}catch(e){S=!0,C=e}finally{try{!j&&E.return&&E.return()}finally{if(S)throw C}}r.codecs.push(a)})()}}catch(e){i=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}var l=!0,u=!1,d=void 0;try{for(var f,h=(0,_.default)(r.codecs);!(l=(f=h.next()).done);l=!0){var m=f.value,v=m.preferredPayloadType;if(n.has(v)){var b={clockRate:m.clockRate,kind:m.kind,mimeType:m.kind+"/rtx",name:"rtx",parameters:{apt:v},preferredPayloadType:n.get(v),rtcpFeedback:[]};r.codecs.push(b)}}}catch(e){u=!0,d=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw d}}var y=!0,g=!1,k=void 0;try{for(var x,j=(0,_.default)(e.headerExtensions);!(y=(x=j.next()).done);y=!0)!function(){var e=x.value,n=t.headerExtensions.find(function(t){return t.kind===e.kind&&t.uri===e.uri});if(n){var o={kind:n.kind,preferredEncrypt:Boolean(e.preferredEncrypt),preferredId:e.preferredId,uri:n.uri};r.headerExtensions.push(o)}}()}catch(e){g=!0,k=e}finally{try{!y&&j.return&&j.return()}finally{if(g)throw k}}var S=!0,C=!1,T=void 0;try{for(var E,R=(0,_.default)(e.fecMechanisms);!(S=(E=R.next()).done);S=!0)!function(){var e=E.value,n=t.fecMechanisms.find(function(t){return t===e});n&&r.fecMechanisms.push(n)}()}catch(e){C=!0,T=e}finally{try{!S&&R.return&&R.return()}finally{if(C)throw T}}return r}function d(e){return e.media.find(function(e){return e.iceUfrag&&0!==e.port})}Object.defineProperty(r,"__esModule",{value:!0});var f=e("babel-runtime/core-js/object/keys"),p=n(f),h=e("babel-runtime/core-js/set"),m=n(h),v=e("babel-runtime/core-js/get-iterator"),_=n(v),b=e("babel-runtime/core-js/array/from"),y=n(b),g=e("babel-runtime/core-js/map"),w=n(g);r.extractCapabilities=o,r.extractDtlsParameters=i,r.extractIceCandidates=a,r.extractIceParameters=s,r.extractMids=c,r.extractTrackInfos=l,r.getLocalCapabilities=u;var k=e("sdp-transform"),x=n(k)},{"babel-runtime/core-js/array/from":11,"babel-runtime/core-js/get-iterator":12,"babel-runtime/core-js/map":15,"babel-runtime/core-js/object/keys":19,"babel-runtime/core-js/set":22,"sdp-transform":176}],8:[function(e,t,r){(function(t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.Init=void 0;var a=e("babel-runtime/helpers/classCallCheck"),s=i(a),c=e("bowser"),l=i(c),u=e("url-parse"),d=i(u),f=e("random-string"),p=i(f),h=e("./Logger"),m=i(h),v=e("./utils"),_=(o(v),e("./edge/RTCPeerConnection")),b=i(_),y=e("./edge/RTCSessionDescription"),g=i(y),w=e("./components/Room"),k=i(w),x=e("wildemitter"),j=o(x);r.Init=function e(r){(0,s.default)(this,e),n.emitter=this.emitter=new j.default;var o=new RegExp("^#room-id=([0-9a-zA-Z_-]+)$"),i=new m.default;i.debug('detected browser [name:"%s", version:%s]',l.default.name,l.default.version),l.default.msedge?(i.debug("Edge detected, overriding RTCPeerConnection and RTCSessionDescription"),window.RTCPeerConnection=b.default,window.RTCSessionDescription=g.default):window.RTCPeerConnection=window.webkitRTCPeerConnection||window.mozRTCPeerConnection||window.RTCPeerConnection,i.debug("run() [environment:%s]",t.env.NODE_ENV);var a=new d.default(window.location.href,!0),c=a.hash.match(o);(0,p.default)({length:8}).toLowerCase();c?c[1]:(0,p.default)({length:8}).toLowerCase(),console.log(r);this.client=new k.default(r)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Logger":2,"./components/Room":3,"./edge/RTCPeerConnection":4,"./edge/RTCSessionDescription":5,"./utils":10,_process:160,"babel-runtime/helpers/classCallCheck":25,bowser:31,"random-string":170,"url-parse":179,wildemitter:183}],9:[function(e,t,r){"use strict";function n(e,t,r){return e+"/?peer-id="+t+"&room-id="+r}Object.defineProperty(r,"__esModule",{value:!0}),r.getProtooUrl=n},{}],10:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return y.debug("initialize()"),w=document.getElementById("mediasoup-demo-app-media-query-detector"),f.default.resolve()}function i(){return!0}function a(){return!1}function s(){return!!(h.default.chrome||h.default.chromium||h.default.opera||h.default.safari||h.default.msedge||h.default.firefox&&h.default.version>=58)}function c(){return!h.default.msedge}function l(){return g()}function u(e){if(e)for(var t=e.getTracks(),r=0,n=t.length;r<n;r++)t[r].stop()}Object.defineProperty(r,"__esModule",{value:!0});var d=e("babel-runtime/core-js/promise"),f=n(d);r.initialize=o,r.isDesktop=i,r.isMobile=a,r.isPlanB=s,r.canChangeResolution=c,r.randomNumber=l,r.closeMediaStream=u;var p=e("bowser"),h=n(p),m=e("random-number"),v=n(m),_=e("./Logger"),b=n(_);t.BROWSER=h.default;var y=new b.default("utils"),g=v.default.generator({min:1e7,max:99999999,integer:!0}),w=void 0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Logger":2,"babel-runtime/core-js/promise":21,bowser:31,"random-number":169}],11:[function(e,t,r){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":32}],12:[function(e,t,r){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":33}],13:[function(e,t,r){t.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":34}],14:[function(e,t,r){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":35}],15:[function(e,t,r){t.exports={default:e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":36}],16:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":37}],17:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":38}],18:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":39}],19:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":40}],20:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":41}],21:[function(e,t,r){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":42}],22:[function(e,t,r){t.exports={default:e("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":43}],23:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":44}],24:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":45}],25:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],26:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/object/define-property"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":17}],27:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=n(o),a=e("../core-js/object/create"),s=n(a),c=e("../helpers/typeof"),l=n(c);r.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":16,"../core-js/object/set-prototype-of":20,"../helpers/typeof":30}],28:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../helpers/typeof"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":30}],29:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var o=e("../core-js/is-iterable"),i=n(o),a=e("../core-js/get-iterator"),s=n(a);r.default=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=(0,s.default)(e);!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},{"../core-js/get-iterator":12,"../core-js/is-iterable":13}],30:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var o=e("../core-js/symbol/iterator"),i=n(o),a=e("../core-js/symbol"),s=n(a),c="function"==typeof s.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};r.default="function"==typeof s.default&&"symbol"===c(i.default)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":c(e)}},{"../core-js/symbol":23,"../core-js/symbol/iterator":24}],31:[function(t,r,n){!function(t,n,o){void 0!==r&&r.exports?r.exports=o():"function"==typeof e&&e.amd?e("bowser",o):t.bowser=o()}(this,0,function(){function e(e){function t(t){var r=e.match(t);return r&&r.length>1&&r[1]||""}function r(t){var r=e.match(t);return r&&r.length>1&&r[2]||""}var n,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),s=!i&&/android/i.test(e),c=/nexus\s*[0-6]\s*/i.test(e),l=!c&&/nexus\s*[0-9]+/i.test(e),u=/CrOS/.test(e),d=/silk/i.test(e),f=/sailfish/i.test(e),p=/tizen/i.test(e),h=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),v=(/SamsungBrowser/i.test(e),!m&&/windows/i.test(e)),_=!o&&!d&&/macintosh/i.test(e),b=!s&&!f&&!p&&!h&&/linux/i.test(e),y=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),g=t(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(e)&&!/tablet pc/i.test(e),k=!w&&/[^-]mobi/i.test(e),x=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:a,version:g||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?n={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||g}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:a,version:g||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:a,version:g||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:a,version:g||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(n={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},y?(n.msedge=a,n.version=y):(n.msie=a,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?n={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?n={name:"Microsoft Edge",msedge:a,version:y}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||g}:f?n={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=a,n.osname="Firefox OS")):d?n={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:g||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(n={name:"WebOS",osname:"WebOS",webos:a,version:g||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=a)):/bada/i.test(e)?n={name:"Bada",osname:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?n={name:"Tizen",osname:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||g}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||g}:/chromium/i.test(e)?n={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||g}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?n={name:"Android",version:g}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:a},g&&(n.version=g)):o?(n={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},g&&(n.version=g)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||g}:{name:t(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=a):(n.name=n.name||"Webkit",n.webkit=a),!n.version&&g&&(n.version=g)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=a,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||!s&&!n.silk?!n.windowsphone&&o?(n[o]=a,n.ios=a,n.osname="iOS"):_?(n.mac=a,n.osname="macOS"):x?(n.xbox=a,n.osname="Xbox"):v?(n.windows=a,n.osname="Windows"):b&&(n.linux=a,n.osname="Linux"):(n.android=a,n.osname="Android");var j="";n.windows?j=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):n.windowsphone?j=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.mac?(j=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),j=j.replace(/[_\s]/g,".")):o?(j=t(/os (\d+([_\s]\d+)*) like mac os x/i),j=j.replace(/[_\s]/g,".")):s?j=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?j=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?j=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?j=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(j=t(/tizen[\/\s](\d+(\.\d+)*)/i)),j&&(n.osversion=j);var S=!n.windows&&j.split(".")[0];return w||l||"ipad"==o||s&&(3==S||S>=4&&!k)||n.silk?n.tablet=a:(k||"iphone"==o||"ipod"==o||s||c||n.blackberry||n.webos||n.bada)&&(n.mobile=a),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=a:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=a:n.x=a,n}function t(e){return e.split(".").length}function r(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function n(e){for(var n=Math.max(t(e[0]),t(e[1])),o=r(e,function(e){var o=n-t(e);return e+=new Array(o+1).join(".0"),r(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--n>=0;){if(o[0][n]>o[1][n])return 1;if(o[0][n]!==o[1][n])return-1;if(0===n)return 0}}function o(t,r,o){var i=s;"string"==typeof r&&(o=r,r=void 0),void 0===r&&(r=!1),o&&(i=e(o));var a=""+i.version;for(var c in t)if(t.hasOwnProperty(c)&&i[c]){if("string"!=typeof t[c])throw new Error("Browser version in the minVersion map should be a string: "+c+": "+String(t));return n([a,t[c]])<0}return r}function i(e,t,r){return!o(e,t,r)}var a=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in s)return!0}return!1},s.isUnsupportedBrowser=o,s.compareVersions=n,s.check=i,s._detect=e,s})},{}],32:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":60,"../../modules/es6.array.from":132,"../../modules/es6.string.iterator":143}],33:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":130,"../modules/es6.string.iterator":143,"../modules/web.dom.iterable":155}],34:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":131,"../modules/es6.string.iterator":143,"../modules/web.dom.iterable":155}],35:[function(e,t,r){var n=e("../../modules/_core"),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(e){return o.stringify.apply(o,arguments)}},{"../../modules/_core":60}],36:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),e("../modules/es7.map.of"),e("../modules/es7.map.from"),t.exports=e("../modules/_core").Map},{"../modules/_core":60,"../modules/es6.map":134,"../modules/es6.object.to-string":140,"../modules/es6.string.iterator":143,"../modules/es7.map.from":145,"../modules/es7.map.of":146,"../modules/es7.map.to-json":147,"../modules/web.dom.iterable":155}],37:[function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":60,"../../modules/es6.object.create":135}],38:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":60,"../../modules/es6.object.define-property":136}],39:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":60,"../../modules/es6.object.get-prototype-of":137}],40:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":60,"../../modules/es6.object.keys":138}],41:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":60,"../../modules/es6.object.set-prototype-of":139}],42:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":60,"../modules/es6.object.to-string":140,"../modules/es6.promise":141,"../modules/es6.string.iterator":143,"../modules/es7.promise.finally":148,"../modules/es7.promise.try":149,"../modules/web.dom.iterable":155}],43:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),e("../modules/es7.set.of"),e("../modules/es7.set.from"),t.exports=e("../modules/_core").Set},{"../modules/_core":60,"../modules/es6.object.to-string":140,"../modules/es6.set":142,"../modules/es6.string.iterator":143,"../modules/es7.set.from":150,"../modules/es7.set.of":151,"../modules/es7.set.to-json":152,"../modules/web.dom.iterable":155}],44:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":60,"../../modules/es6.object.to-string":140,"../../modules/es6.symbol":144,"../../modules/es7.symbol.async-iterator":153,"../../modules/es7.symbol.observable":154}],45:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":127,"../../modules/es6.string.iterator":143,"../../modules/web.dom.iterable":155}],46:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],47:[function(e,t,r){t.exports=function(){}},{}],48:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],49:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":80}],50:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":70}],51:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-absolute-index");t.exports=function(e){return function(t,r,a){var s,c=n(t),l=o(c.length),u=i(a,l);if(e&&r!=r){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}}},{"./_to-absolute-index":118,"./_to-iobject":120,"./_to-length":121}],52:[function(e,t,r){var n=e("./_ctx"),o=e("./_iobject"),i=e("./_to-object"),a=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var r=1==e,c=2==e,l=3==e,u=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var m,v,_=i(t),b=o(_),y=n(s,h,3),g=a(b.length),w=0,k=r?p(t,g):c?p(t,0):void 0;g>w;w++)if((f||w in b)&&(m=b[w],v=y(m,w,_),e))if(r)k[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:k.push(m)}else if(u)return!1;return d?-1:l||u?u:k}}},{"./_array-species-create":54,"./_ctx":62,"./_iobject":77,"./_to-length":121,"./_to-object":122}],53:[function(e,t,r){var n=e("./_is-object"),o=e("./_is-array"),i=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":79,"./_is-object":80,"./_wks":128}],54:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":53}],55:[function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":56,"./_wks":128}],56:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],57:[function(e,t,r){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),i=e("./_redefine-all"),a=e("./_ctx"),s=e("./_an-instance"),c=e("./_for-of"),l=e("./_iter-define"),u=e("./_iter-step"),d=e("./_set-species"),f=e("./_descriptors"),p=e("./_meta").fastKey,h=e("./_validate-collection"),m=f?"_s":"size",v=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,l){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=n&&c(n,r,e[l],e)});return i(u.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=h(this,t),n=v(r,e);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[m]--}return!!n},forEach:function(e){h(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(h(this,t),e)}}),f&&n(u.prototype,"size",{get:function(){return h(this,t)[m]}}),u},def:function(e,t,r){var n,o,i=v(e,t);return i?i.v=r:(e._l=i={i:o=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[m]++,"F"!==o&&(e._i[o]=i)),e},getEntry:v,setStrong:function(e,t,r){l(e,t,function(e,r){this._t=h(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?u(0,r.k):"values"==t?u(0,r.v):u(0,[r.k,r.v]):(e._t=void 0,u(1))},r?"entries":"values",!r,!0),d(t)}}},{"./_an-instance":48,"./_ctx":62,"./_descriptors":64,"./_for-of":70,"./_iter-define":83,"./_iter-step":85,"./_meta":88,"./_object-create":91,"./_object-dp":92,"./_redefine-all":106,"./_set-species":111,"./_validate-collection":125}],58:[function(e,t,r){var n=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":50,"./_classof":55}],59:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_export"),i=e("./_meta"),a=e("./_fails"),s=e("./_hide"),c=e("./_redefine-all"),l=e("./_for-of"),u=e("./_an-instance"),d=e("./_is-object"),f=e("./_set-to-string-tag"),p=e("./_object-dp").f,h=e("./_array-methods")(0),m=e("./_descriptors");t.exports=function(e,t,r,v,_,b){var y=n[e],g=y,w=_?"set":"add",k=g&&g.prototype,x={};return m&&"function"==typeof g&&(b||k.forEach&&!a(function(){(new g).entries().next()}))?(g=t(function(t,r){u(t,g,e,"_c"),t._c=new y,void 0!=r&&l(r,_,t[w],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!b||"clear"!=e)&&s(g.prototype,e,function(r,n){if(u(this,g,e),!t&&b&&!d(r))return"get"==e&&void 0;var o=this._c[e](0===r?0:r,n);return t?this:o})}),b||p(g.prototype,"size",{get:function(){return this._c.size}})):(g=v.getConstructor(t,e,_,w),c(g.prototype,r),i.NEED=!0),f(g,e),x[e]=g,o(o.G+o.W+o.F,x),b||v.setStrong(g,e,_),g}},{"./_an-instance":48,"./_array-methods":52,"./_descriptors":64,"./_export":68,"./_fails":69,"./_for-of":70,"./_global":71,"./_hide":73,"./_is-object":80,"./_meta":88,"./_object-dp":92,"./_redefine-all":106,"./_set-to-string-tag":112}],60:[function(e,t,r){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},{}],61:[function(e,t,r){"use strict";var n=e("./_object-dp"),o=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},{"./_object-dp":92,"./_property-desc":105}],62:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":46}],63:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],64:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":69}],65:[function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":71,"./_is-object":80}],66:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],67:[function(e,t,r){var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=n(e),r=o.f;if(r)for(var a,s=r(e),c=i.f,l=0;s.length>l;)c.call(e,a=s[l++])&&t.push(a);return t}},{"./_object-gops":97,"./_object-keys":100,"./_object-pie":101}],68:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s=function(e,t,r){var c,l,u,d=e&s.F,f=e&s.G,p=e&s.S,h=e&s.P,m=e&s.B,v=e&s.W,_=f?o:o[t]||(o[t]={}),b=_.prototype,y=f?n:p?n[t]:(n[t]||{}).prototype;f&&(r=t);for(c in r)(l=!d&&y&&void 0!==y[c])&&c in _||(u=l?y[c]:r[c],_[c]=f&&"function"!=typeof y[c]?r[c]:m&&l?i(u,n):v&&y[c]==u?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):h&&"function"==typeof u?i(Function.call,u):u,h&&((_.virtual||(_.virtual={}))[c]=u,e&s.R&&b&&!b[c]&&a(b,c,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},{"./_core":60,"./_ctx":62,"./_global":71,"./_hide":73}],69:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],70:[function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),c=e("./core.get-iterator-method"),l={},u={},r=t.exports=function(e,t,r,d,f){var p,h,m,v,_=f?function(){return e}:c(e),b=n(r,d,t?2:1),y=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(i(_)){for(p=s(e.length);p>y;y++)if((v=t?b(a(h=e[y])[0],h[1]):b(e[y]))===l||v===u)return v}else for(m=_.call(e);!(h=m.next()).done;)if((v=o(m,b,h.value,t))===l||v===u)return v};r.BREAK=l,r.RETURN=u},{"./_an-object":49,"./_ctx":62,"./_is-array-iter":78,"./_iter-call":81,"./_to-length":121,"./core.get-iterator-method":129}],71:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],72:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],73:[function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":64,"./_object-dp":92,"./_property-desc":105}],74:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":71}],75:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":64,"./_dom-create":65,"./_fails":69}],76:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],77:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":56}],78:[function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},{"./_iterators":86,"./_wks":128}],79:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":56}],80:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}
},{}],81:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},{"./_an-object":49}],82:[function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},{"./_hide":73,"./_object-create":91,"./_property-desc":105,"./_set-to-string-tag":112,"./_wks":128}],83:[function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),c=e("./_iterators"),l=e("./_iter-create"),u=e("./_set-to-string-tag"),d=e("./_object-gpo"),f=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(e,t,r,m,v,_,b){l(r,t,m);var y,g,w,k=function(e){if(!p&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},x=t+" Iterator",j="values"==v,S=!1,C=e.prototype,T=C[f]||C["@@iterator"]||v&&C[v],E=!p&&T||k(v),R=v?j?k("entries"):E:void 0,P="Array"==t?C.entries||T:T;if(P&&(w=d(P.call(new e)))!==Object.prototype&&w.next&&(u(w,x,!0),n||s(w,f)||a(w,f,h)),j&&T&&"values"!==T.name&&(S=!0,E=function(){return T.call(this)}),n&&!b||!p&&!S&&C[f]||a(C,f,E),c[t]=E,c[x]=h,v)if(y={values:j?E:k("values"),keys:_?E:k("keys"),entries:R},b)for(g in y)g in C||i(C,g,y[g]);else o(o.P+o.F*(p||S),t,y);return y}},{"./_export":68,"./_has":72,"./_hide":73,"./_iter-create":82,"./_iterators":86,"./_library":87,"./_object-gpo":98,"./_redefine":107,"./_set-to-string-tag":112,"./_wks":128}],84:[function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},{"./_wks":128}],85:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],86:[function(e,t,r){t.exports={}},{}],87:[function(e,t,r){t.exports=!0},{}],88:[function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,s=0,c=Object.isExtensible||function(){return!0},l=!e("./_fails")(function(){return c(Object.preventExtensions({}))}),u=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[n].i},f=function(e,t){if(!i(e,n)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[n].w},p=function(e){return l&&h.NEED&&c(e)&&!i(e,n)&&u(e),e},h=t.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},{"./_fails":69,"./_has":72,"./_is-object":80,"./_object-dp":92,"./_uid":124}],89:[function(e,t,r){var n=e("./_global"),o=e("./_task").set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,c="process"==e("./_cof")(a);t.exports=function(){var e,t,r,l=function(){var n,o;for(c&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(c)r=function(){a.nextTick(l)};else if(!i||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var u=s.resolve();r=function(){u.then(l)}}else r=function(){o.call(n,l)};else{var d=!0,f=document.createTextNode("");new i(l).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},{"./_cof":56,"./_global":71,"./_task":117}],90:[function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=o(t),this.reject=o(r)}var o=e("./_a-function");t.exports.f=function(e){return new n(e)}},{"./_a-function":46}],91:[function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},c=function(){var t,r=e("./_dom-create")("iframe"),n=i.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;n--;)delete c.prototype[i[n]];return c()};t.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=c(),void 0===t?r:o(r,t)}},{"./_an-object":49,"./_dom-create":65,"./_enum-bug-keys":66,"./_html":74,"./_object-dps":93,"./_shared-key":113}],92:[function(e,t,r){var n=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":49,"./_descriptors":64,"./_ie8-dom-define":75,"./_to-primitive":123}],93:[function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,c=0;s>c;)n.f(e,r=a[c++],t[r]);return e}},{"./_an-object":49,"./_descriptors":64,"./_object-dp":92,"./_object-keys":100}],94:[function(e,t,r){var n=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),c=e("./_ie8-dom-define"),l=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?l:function(e,t){if(e=i(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},{"./_descriptors":64,"./_has":72,"./_ie8-dom-define":75,"./_object-pie":101,"./_property-desc":105,"./_to-iobject":120,"./_to-primitive":123}],95:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};t.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(n(e))}},{"./_object-gopn":96,"./_to-iobject":120}],96:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"./_enum-bug-keys":66,"./_object-keys-internal":99}],97:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],98:[function(e,t,r){var n=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":72,"./_shared-key":113,"./_to-object":122}],99:[function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=o(e),c=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~i(l,r)||l.push(r));return l}},{"./_array-includes":51,"./_has":72,"./_shared-key":113,"./_to-iobject":120}],100:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":66,"./_object-keys-internal":99}],101:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],102:[function(e,t,r){var n=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},{"./_core":60,"./_export":68,"./_fails":69}],103:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],104:[function(e,t,r){var n=e("./_an-object"),o=e("./_is-object"),i=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},{"./_an-object":49,"./_is-object":80,"./_new-promise-capability":90}],105:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],106:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},{"./_hide":73}],107:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":73}],108:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_a-function"),i=e("./_ctx"),a=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,c=arguments[1];return o(this),t=void 0!==c,t&&o(c),void 0==e?new this:(r=[],t?(n=0,s=i(c,arguments[2],2),a(e,!1,function(e){r.push(s(e,n++))})):a(e,!1,r.push,r),new this(r))}})}},{"./_a-function":46,"./_ctx":62,"./_export":68,"./_for-of":70}],109:[function(e,t,r){"use strict";var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":68}],110:[function(e,t,r){var n=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return i(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:i}},{"./_an-object":49,"./_ctx":62,"./_is-object":80,"./_object-gopd":94}],111:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_core"),i=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":60,"./_descriptors":64,"./_global":71,"./_object-dp":92,"./_wks":128}],112:[function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":72,"./_object-dp":92,"./_wks":128}],113:[function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":114,"./_uid":124}],114:[function(e,t,r){var n=e("./_global"),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./_global":71}],115:[function(e,t,r){var n=e("./_an-object"),o=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},{"./_a-function":46,"./_an-object":49,"./_wks":128}],116:[function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var i,a,s=String(o(t)),c=n(r),l=s.length;return c<0||c>=l?e?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536)}}},{"./_defined":63,"./_to-integer":119}],117:[function(e,t,r){var n,o,i,a=e("./_ctx"),s=e("./_invoke"),c=e("./_html"),l=e("./_dom-create"),u=e("./_global"),d=u.process,f=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,m=u.Dispatch,v=0,_={},b=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},y=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},p=function(e){delete _[e]},"process"==e("./_cof")(d)?n=function(e){d.nextTick(a(b,e,1))}:m&&m.now?n=function(e){m.now(a(b,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=y,n=a(i.postMessage,i,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):n="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),t.exports={set:f,clear:p}},{"./_cof":56,"./_ctx":62,"./_dom-create":65,"./_global":71,"./_html":74,"./_invoke":76}],118:[function(e,t,r){var n=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":119}],119:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],120:[function(e,t,r){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":63,"./_iobject":77}],121:[function(e,t,r){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":119}],122:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":63}],123:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":80}],124:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],125:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":80}],126:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":60,"./_global":71,"./_library":87,"./_object-dp":92,"./_wks-ext":127}],127:[function(e,t,r){r.f=e("./_wks")},{"./_wks":128}],128:[function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i;(t.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},{"./_global":71,"./_shared":114,"./_uid":124}],129:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},{"./_classof":55,"./_core":60,"./_iterators":86,"./_wks":128}],130:[function(e,t,r){var n=e("./_an-object"),o=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":49,"./_core":60,"./core.get-iterator-method":129}],131:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(n(t))}},{"./_classof":55,"./_core":60,"./_iterators":86,"./_wks":128}],132:[function(e,t,r){"use strict";var n=e("./_ctx"),o=e("./_export"),i=e("./_to-object"),a=e("./_iter-call"),s=e("./_is-array-iter"),c=e("./_to-length"),l=e("./_create-property"),u=e("./core.get-iterator-method");o(o.S+o.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,d,f=i(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,_=0,b=u(f);if(v&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==b||p==Array&&s(b))for(t=c(f.length),r=new p(t);t>_;_++)l(r,_,v?m(f[_],_):f[_]);else for(d=b.call(f),r=new p;!(o=d.next()).done;_++)l(r,_,v?a(d,m,[o.value,_],!0):o.value);return r.length=_,r}})},{"./_create-property":61,"./_ctx":62,"./_export":68,"./_is-array-iter":78,"./_iter-call":81,"./_iter-detect":84,"./_to-length":121,"./_to-object":122,"./core.get-iterator-method":129}],133:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":47,"./_iter-define":83,"./_iter-step":85,"./_iterators":86,"./_to-iobject":120}],134:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":59,"./_collection-strong":57,"./_validate-collection":125}],135:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":68,"./_object-create":91}],136:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":64,"./_export":68,"./_object-dp":92}],137:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(n(e))}})},{"./_object-gpo":98,"./_object-sap":102,"./_to-object":122}],138:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return o(n(e))}})},{"./_object-keys":100,"./_object-sap":102,"./_to-object":122}],139:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":68,"./_set-proto":110}],140:[function(e,t,r){},{}],141:[function(e,t,r){"use strict";var n,o,i,a,s=e("./_library"),c=e("./_global"),l=e("./_ctx"),u=e("./_classof"),d=e("./_export"),f=e("./_is-object"),p=e("./_a-function"),h=e("./_an-instance"),m=e("./_for-of"),v=e("./_species-constructor"),_=e("./_task").set,b=e("./_microtask")(),y=e("./_new-promise-capability"),g=e("./_perform"),w=e("./_promise-resolve"),k=c.TypeError,x=c.process,j=c.Promise,S="process"==u(x),C=function(){},T=o=y.f,E=!!function(){try{var t=j.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(C,C)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof r}catch(e){}}(),R=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var r=e._c;b(function(){for(var n=e._v,o=1==e._s,i=0;r.length>i;)!function(t){var r,i,a=o?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{a?(o||(2==e._h&&M(e),e._h=1),!0===a?r=n:(l&&l.enter(),r=a(n),l&&l.exit()),r===t.promise?c(k("Promise-chain cycle")):(i=R(r))?i.call(r,s,c):s(r)):c(n)}catch(e){c(e)}}(r[i++]);e._c=[],e._n=!1,t&&!e._h&&O(e)})}},O=function(e){_.call(c,function(){var t,r,n,o=e._v,i=I(e);if(i&&(t=g(function(){S?x.emit("unhandledRejection",o,e):(r=c.onunhandledrejection)?r({promise:e,reason:o}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=S||I(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},I=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){_.call(c,function(){var t;S?x.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},F=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},L=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(t=R(e))?b(function(){var n={_w:r,_d:!1};try{t.call(e,l(L,n,1),l(F,n,1))}catch(e){F.call(n,e)}}):(r._v=e,r._s=1,P(r,!1))}catch(e){F.call({_w:r,_d:!1},e)}}};E||(j=function(e){h(this,j,"Promise","_h"),p(e),n.call(this);try{e(l(L,this,1),l(F,this,1))}catch(e){F.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=e("./_redefine-all")(j.prototype,{then:function(e,t){var r=T(v(this,j));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&P(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=l(L,e,1),this.reject=l(F,e,1)},y.f=T=function(e){return e===j||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!E,{Promise:j}),e("./_set-to-string-tag")(j,"Promise"),e("./_set-species")("Promise"),a=e("./_core").Promise,d(d.S+d.F*!E,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!E),"Promise",{resolve:function(e){return w(s&&this===a?j:this,e)}}),d(d.S+d.F*!(E&&e("./_iter-detect")(function(e){j.all(e).catch(C)})),"Promise",{all:function(e){var t=this,r=T(t),n=r.resolve,o=r.reject,i=g(function(){var r=[],i=0,a=1;m(e,!1,function(e){var s=i++,c=!1;r.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,r[s]=e,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=T(t),n=r.reject,o=g(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},{"./_a-function":46,"./_an-instance":48,"./_classof":55,"./_core":60,"./_ctx":62,"./_export":68,"./_for-of":70,"./_global":71,"./_is-object":80,"./_iter-detect":84,"./_library":87,"./_microtask":89,"./_new-promise-capability":90,"./_perform":103,"./_promise-resolve":104,"./_redefine-all":106,"./_set-species":111,"./_set-to-string-tag":112,"./_species-constructor":115,"./_task":117,"./_wks":128}],142:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":59,"./_collection-strong":57,"./_validate-collection":125}],143:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":83,"./_string-at":116}],144:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_has"),i=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),c=e("./_meta").KEY,l=e("./_fails"),u=e("./_shared"),d=e("./_set-to-string-tag"),f=e("./_uid"),p=e("./_wks"),h=e("./_wks-ext"),m=e("./_wks-define"),v=e("./_enum-keys"),_=e("./_is-array"),b=e("./_an-object"),y=e("./_is-object"),g=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),x=e("./_object-create"),j=e("./_object-gopn-ext"),S=e("./_object-gopd"),C=e("./_object-dp"),T=e("./_object-keys"),E=S.f,R=C.f,P=j.f,O=n.Symbol,I=n.JSON,M=I&&I.stringify,F=p("_hidden"),L=p("toPrimitive"),A={}.propertyIsEnumerable,N=u("symbol-registry"),D=u("symbols"),W=u("op-symbols"),V=Object.prototype,q="function"==typeof O,G=n.QObject,z=!G||!G.prototype||!G.prototype.findChild,B=i&&l(function(){return 7!=x(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=E(V,t);n&&delete V[t],R(e,t,r),n&&e!==V&&R(V,t,n)}:R,U=function(e){var t=D[e]=x(O.prototype);return t._k=e,t},J=q&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},H=function(e,t,r){return e===V&&H(W,t,r),b(e),t=w(t,!0),b(r),o(D,t)?(r.enumerable?(o(e,F)&&e[F][t]&&(e[F][t]=!1),r=x(r,{enumerable:k(0,!1)})):(o(e,F)||R(e,F,k(1,{})),e[F][t]=!0),B(e,t,r)):R(e,t,r)},$=function(e,t){b(e);for(var r,n=v(t=g(t)),o=0,i=n.length;i>o;)H(e,r=n[o++],t[r]);return e},Z=function(e,t){return void 0===t?x(e):$(x(e),t)},K=function(e){var t=A.call(this,e=w(e,!0));return!(this===V&&o(D,e)&&!o(W,e))&&(!(t||!o(this,e)||!o(D,e)||o(this,F)&&this[F][e])||t)},Y=function(e,t){if(e=g(e),t=w(t,!0),e!==V||!o(D,t)||o(W,t)){var r=E(e,t);return!r||!o(D,t)||o(e,F)&&e[F][t]||(r.enumerable=!0),r}},X=function(e){for(var t,r=P(g(e)),n=[],i=0;r.length>i;)o(D,t=r[i++])||t==F||t==c||n.push(t);return n},Q=function(e){for(var t,r=e===V,n=P(r?W:g(e)),i=[],a=0;n.length>a;)!o(D,t=n[a++])||r&&!o(V,t)||i.push(D[t]);return i};q||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===V&&t.call(W,r),o(this,F)&&o(this[F],e)&&(this[F][e]=!1),B(this,e,k(1,r))};return i&&z&&B(V,e,{configurable:!0,set:t}),U(e)},s(O.prototype,"toString",function(){return this._k}),S.f=Y,C.f=H,e("./_object-gopn").f=j.f=X,e("./_object-pie").f=K,e("./_object-gops").f=Q,i&&!e("./_library")&&s(V,"propertyIsEnumerable",K,!0),h.f=function(e){return U(p(e))}),a(a.G+a.W+a.F*!q,{Symbol:O});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var re=T(p.store),ne=0;re.length>ne;)m(re[ne++]);a(a.S+a.F*!q,"Symbol",{for:function(e){return o(N,e+="")?N[e]:N[e]=O(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!q,"Object",{create:Z,defineProperty:H,defineProperties:$,getOwnPropertyDescriptor:Y,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),I&&a(a.S+a.F*(!q||l(function(){var e=O();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(y(t)||void 0!==e)&&!J(e))return _(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!J(t))return t}),n[1]=t,M.apply(I,n)}}),O.prototype[L]||e("./_hide")(O.prototype,L,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},{"./_an-object":49,"./_descriptors":64,"./_enum-keys":67,"./_export":68,"./_fails":69,"./_global":71,"./_has":72,"./_hide":73,"./_is-array":79,"./_is-object":80,"./_library":87,"./_meta":88,"./_object-create":91,"./_object-dp":92,"./_object-gopd":94,"./_object-gopn":96,"./_object-gopn-ext":95,"./_object-gops":97,"./_object-keys":100,"./_object-pie":101,"./_property-desc":105,"./_redefine":107,"./_set-to-string-tag":112,"./_shared":114,"./_to-iobject":120,"./_to-primitive":123,"./_uid":124,"./_wks":128,"./_wks-define":126,"./_wks-ext":127}],145:[function(e,t,r){e("./_set-collection-from")("Map")},{"./_set-collection-from":108}],146:[function(e,t,r){e("./_set-collection-of")("Map")},{"./_set-collection-of":109}],147:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":58,"./_export":68}],148:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_core"),i=e("./_global"),a=e("./_species-constructor"),s=e("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},{"./_core":60,"./_export":68,"./_global":71,"./_promise-resolve":104,"./_species-constructor":115}],149:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_new-promise-capability"),i=e("./_perform");n(n.S,"Promise",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},{"./_export":68,"./_new-promise-capability":90,"./_perform":103}],150:[function(e,t,r){e("./_set-collection-from")("Set")},{"./_set-collection-from":108}],151:[function(e,t,r){e("./_set-collection-of")("Set")},{"./_set-collection-of":109}],152:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":58,"./_export":68}],153:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":126}],154:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":126}],155:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),o=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],u=n[l],d=u&&u.prototype;d&&!d[a]&&o(d,a,l),i[l]=i.Array}},{"./_global":71,"./_hide":73,"./_iterators":86,"./_wks":128,"./es6.array.iterator":133}],156:[function(e,t,r){(function(n){function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}}function c(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}r=t.exports=e("./debug"),r.log=a,r.formatArgs=i,r.save=s,r.load=c,r.useColors=o,r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(c())}).call(this,e("_process"))},{"./debug":157,_process:160}],157:[function(e,t,r){function n(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}function o(e){function t(){if(t.enabled){var e=t,n=+new Date,i=n-(o||n);e.diff=i,e.prev=o,e.curr=n,o=n;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=r.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;c++;var o=r.formatters[n];if("function"==typeof o){var i=a[c];t=o.call(e,i),a.splice(c,1),c--}return t}),r.formatArgs.call(e,a);(t.log||r.log||console.log.bind(console)).apply(e,a)}}var o;return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=n(e),t.destroy=i,"function"==typeof r.init&&r.init(t),r.instances.push(t),t}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e){r.save(e),r.names=[],r.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&(e=n[t].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))
;for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}}function s(){r.enable("")}function c(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=o.debug=o.default=o,r.coerce=l,r.disable=s,r.enable=a,r.enabled=c,r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={}},{ms:159}],158:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,i,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(r=this._events[e],s(r))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(a(r))for(i=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,c=0;c<n;c++)l[c].apply(this,i);return!0},n.prototype.addListener=function(e,t){var r;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,i,s;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,n=-1,r===t||o(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=i;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],o(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],159:[function(e,t,r){function n(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*d;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*l;case"minutes":case"minute":case"mins":case"min":case"m":return r*c;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function o(e){return e>=u?Math.round(e/u)+"d":e>=l?Math.round(e/l)+"h":e>=c?Math.round(e/c)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return a(e,u,"day")||a(e,l,"hour")||a(e,c,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,c=60*s,l=60*c,u=24*l,d=365.25*u;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return n(e);if("number"===r&&!1===isNaN(e))return t.long?i(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],160:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){v&&h&&(v=!1,h.length?m=h.concat(m):_=-1,m.length&&c())}function c(){if(!v){var e=i(s);v=!0;for(var t=m.length;t;){for(h=m,m=[];++_<t;)h&&h[_].run();_=-1,t=m.length}h=null,v=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var d,f,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var h,m=[],v=!1,_=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new l(e,t)),1!==m.length||v||i(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],161:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=e("babel-runtime/helpers/typeof"),i=n(o),a=e("babel-runtime/helpers/classCallCheck"),s=n(a),c=e("babel-runtime/helpers/createClass"),l=n(c),u=e("./logger")("Message"),d=e("./utils"),f=function(){function e(){(0,s.default)(this,e)}return(0,l.default)(e,null,[{key:"parse",value:function(e){var t=void 0,r={};try{t=JSON.parse(e)}catch(e){return void u.error("parse() | invalid JSON: %s",e)}if("object"!==(void 0===t?"undefined":(0,i.default)(t))||Array.isArray(t))return void u.error("parse() | not an object");if("number"!=typeof t.id)return void u.error("parse() | missing/invalid id field");if(r.id=t.id,t.request){if(r.request=!0,"string"!=typeof t.method)return void u.error("parse() | missing/invalid method field");r.method=t.method,r.data=t.data||{}}else{if(!t.response)return void u.error("parse() | missing request/response field");r.response=!0,t.ok?(r.ok=!0,r.data=t.data||{}):(r.errorCode=t.errorCode,r.errorReason=t.errorReason)}return r}},{key:"requestFactory",value:function(e,t){return{request:!0,id:d.randomNumber(),method:e,data:t||{}}}},{key:"successResponseFactory",value:function(e,t){return{response:!0,id:e.id,ok:!0,data:t||{}}}},{key:"errorResponseFactory",value:function(e,t,r){return{response:!0,id:e.id,codeCode:t,errorReason:r}}}]),e}();t.exports=f},{"./logger":164,"./utils":167,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/helpers/typeof":30}],162:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=e("babel-runtime/core-js/promise"),i=n(o),a=e("babel-runtime/core-js/map"),s=n(a),c=e("babel-runtime/core-js/object/get-prototype-of"),l=n(c),u=e("babel-runtime/helpers/classCallCheck"),d=n(u),f=e("babel-runtime/helpers/createClass"),p=n(f),h=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(h),v=e("babel-runtime/helpers/inherits"),_=n(v),b=e("events").EventEmitter,y=e("./logger")("Peer"),g=e("./Message"),w=function(e){function t(e){(0,d.default)(this,t),y.debug("constructor()");var r=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return r.setMaxListeners(1/0),r._transport=e,r._closed=!1,r._data={},r._requestHandlers=new s.default,r._handleTransport(),r}return(0,_.default)(t,e),(0,p.default)(t,[{key:"send",value:function(e,t){var r=this,n=g.requestFactory(e,t);return this._transport.send(n).then(function(){return new i.default(function(e,t){var o={resolve:function(t){r._requestHandlers.delete(n.id)&&(clearTimeout(o.timer),e(t))},reject:function(e){r._requestHandlers.delete(n.id)&&(clearTimeout(o.timer),t(e))},timer:setTimeout(function(){r._requestHandlers.delete(n.id)&&t(new Error("request timeout"))},2e4),close:function(){clearTimeout(o.timer),t(new Error("peer closed"))}};r._requestHandlers.set(n.id,o)})})}},{key:"close",value:function(){y.debug("close()"),this._closed||(this._closed=!0,this._transport.close(),this._requestHandlers.forEach(function(e){return e.close()}),this.emit("close"))}},{key:"_handleTransport",value:function(){var e=this;if(this._transport.closed)return this._closed=!0,void setTimeout(function(){return e.emit("close")});this._transport.on("connecting",function(t){e.emit("connecting",t)}),this._transport.on("open",function(){e._closed||e.emit("open")}),this._transport.on("disconnected",function(){e.emit("disconnected")}),this._transport.on("failed",function(t){e.emit("failed",t)}),this._transport.on("close",function(){e._closed||(e._closed=!0,e.emit("close"))}),this._transport.on("message",function(t){t.response?e._handleResponse(t):t.request&&e._handleRequest(t)})}},{key:"_handleResponse",value:function(e){var t=this._requestHandlers.get(e.id);if(!t)return void y.error("received response does not match any sent request");if(e.ok)t.resolve(e.data);else{var r=new Error(e.errorReason);r.code=e.errorCode,t.reject(r)}}},{key:"_handleRequest",value:function(e){var t=this;this.emit("request",e,function(r){var n=g.successResponseFactory(e,r);t._transport.send(n).catch(function(e){y.warn("accept() failed, response could not be sent: %o",e)})},function(r,n){r instanceof Error?(n=r.toString(),r=500):"number"==typeof r&&n instanceof Error&&(n=n.toString());var o=g.errorResponseFactory(e,r,n);t._transport.send(o).catch(function(e){y.warn("reject() failed, response could not be sent: %o",e)})})}},{key:"data",get:function(){return this._data},set:function(e){this._data=e||{}}},{key:"closed",get:function(){return this._closed}}]),t}(b);t.exports=w},{"./Message":161,"./logger":164,"babel-runtime/core-js/map":15,"babel-runtime/core-js/object/get-prototype-of":18,"babel-runtime/core-js/promise":21,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/helpers/inherits":27,"babel-runtime/helpers/possibleConstructorReturn":28,events:158}],163:[function(e,t,r){"use strict";var n=e("./Peer"),o=e("./transports");t.exports={Peer:n,WebSocketTransport:o.WebSocketTransport}},{"./Peer":162,"./transports":166}],164:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=e("babel-runtime/helpers/classCallCheck"),i=n(o),a=e("babel-runtime/helpers/createClass"),s=n(a),c=e("debug"),l="protoo-client",u=function(){function e(t){(0,i.default)(this,e),t?(this._debug=c(l+":"+t),this._warn=c(l+":WARN:"+t),this._error=c(l+":ERROR:"+t)):(this._debug=c(l),this._warn=c(l+":WARN"),this._error=c(l+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,s.default)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();t.exports=function(e){return new u(e)}},{"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,debug:156}],165:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=e("babel-runtime/core-js/json/stringify"),i=n(o),a=e("babel-runtime/core-js/promise"),s=n(a),c=e("babel-runtime/core-js/object/get-prototype-of"),l=n(c),u=e("babel-runtime/helpers/classCallCheck"),d=n(u),f=e("babel-runtime/helpers/createClass"),p=n(f),h=e("babel-runtime/helpers/possibleConstructorReturn"),m=n(h),v=e("babel-runtime/helpers/inherits"),_=n(v),b=e("events").EventEmitter,y=e("websocket").w3cwebsocket,g=e("retry"),w=e("../logger")("WebSocketTransport"),k=e("../Message"),x={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},j=function(e){function t(e,r){(0,d.default)(this,t),w.debug('constructor() [url:"%s", options:%o]',e,r);var n=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return n.setMaxListeners(1/0),n._url=e,n._options=r||{},n._ws=null,n._closed=!1,n._setWebSocket(),n}return(0,_.default)(t,e),(0,p.default)(t,[{key:"send",value:function(e){if(this._closed)return s.default.reject(new Error("transport closed"));try{return this._ws.send((0,i.default)(e)),s.default.resolve()}catch(e){return w.error("send() | error sending message: %o",e),s.default.reject(e)}}},{key:"close",value:function(){if(w.debug("close()"),!this._closed){this._closed=!0,this.emit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(e){w.error("close() | error closing the WebSocket: %o",e)}}}},{key:"_setWebSocket",value:function(){var e=this,t=this._options,r=g.operation(this._options.retry||x),n=!1;r.attempt(function(o){if(e._closed)return void r.stop();w.debug("_setWebSocket() [currentAttempt:%s]",o),e._ws=new y(e._url,"protoo",t.origin,t.headers,t.requestOptions,t.clientConfig),e.emit("connecting",o),e._ws.onopen=function(){e._closed||(n=!0,e.emit("open"))},e._ws.onclose=function(t){if(!e._closed){if(w.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',t.wasClean,t.code,t.reason),4e3!==t.code){if(n)return r.stop(),e.emit("disconnected"),void e._setWebSocket();if(e.emit("failed",o),r.retry(!0))return}e._closed=!0,e.emit("close")}},e._ws.onerror=function(){e._closed||w.error('WebSocket "error" event')},e._ws.onmessage=function(t){if(!e._closed){var r=k.parse(t.data);if(r)return 0===e.listenerCount("message")?void w.error('no listeners for WebSocket "message" event, ignoring received message'):void e.emit("message",r)}}})}},{key:"closed",get:function(){return this._closed}}]),t}(b);t.exports=j},{"../Message":161,"../logger":164,"babel-runtime/core-js/json/stringify":14,"babel-runtime/core-js/object/get-prototype-of":18,"babel-runtime/core-js/promise":21,"babel-runtime/helpers/classCallCheck":25,"babel-runtime/helpers/createClass":26,"babel-runtime/helpers/inherits":27,"babel-runtime/helpers/possibleConstructorReturn":28,events:158,retry:172,websocket:180}],166:[function(e,t,r){"use strict";var n=e("./WebSocketTransport");t.exports={WebSocketTransport:n}},{"./WebSocketTransport":165}],167:[function(e,t,r){"use strict";var n=e("random-number"),o=n.generator({min:1e6,max:9999999,integer:!0});t.exports={randomNumber:o}},{"random-number":169}],168:[function(e,t,r){"use strict";function n(e){return decodeURIComponent(e.replace(/\+/g," "))}function o(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,o={};t=r.exec(e);o[n(t[1])]=n(t[2]));return o}function i(e,t){t=t||"";var r=[];"string"!=typeof t&&(t="?");for(var n in e)a.call(e,n)&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r.length?t+r.join("&"):""}var a=Object.prototype.hasOwnProperty;r.stringify=i,r.parse=o},{}],169:[function(e,t,r){!function(e){function r(e){var e=e||{},t=e.min,r=e.max,n=e.integer||!1;if(null==t&&null==r?(t=0,r=1):null==t?t=r-1:null==r&&(r=t+1),r<t)throw new Error("invalid options, max must be >= min");return{min:t,max:r,integer:n}}function n(e){if(e=r(e),e.max===e.min)return e.min;var t=Math.random()*(e.max-e.min+Number(!!e.integer))+e.min;return e.integer?Math.floor(t):t}function o(e){return e=r(e),function(t,r,o){return e.min=null!=t?t:e.min,e.max=null!=r?r:e.max,e.integer=null!=o?o:e.integer,n(e)}}t.exports=n,t.exports.generator=o,t.exports.defaults=r}()},{}],170:[function(e,t,r){"use strict";function n(e){return e||(e={}),{length:e.length||8,numeric:"boolean"!=typeof e.numeric||e.numeric,letters:"boolean"!=typeof e.letters||e.letters,special:"boolean"==typeof e.special&&e.special,exclude:Array.isArray(e.exclude)?e.exclude:[]}}function o(e){var t="";e.numeric&&(t+=i),e.letters&&(t+=a),e.special&&(t+=s);for(var r=0;r<=e.exclude.length;r++)t=t.replace(e.exclude[r],"");return t}var i="0123456789",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",s="!$%^&*()_+|~-=`{}[]:;<>?,./";t.exports=function(e){e=n(e);var t,r,i="",a=e.length,s=(e.exclude,o(e));for(t=1;t<=a;t++)i+=s.substring(r=Math.floor(Math.random()*s.length),r+1);return i}},{}],171:[function(e,t,r){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],172:[function(e,t,r){t.exports=e("./lib/retry")},{"./lib/retry":173}],173:[function(e,t,r){var n=e("./retry_operation");r.operation=function(e){var t=r.timeouts(e);return new n(t,{forever:e&&e.forever,unref:e&&e.unref})},r.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],o=0;o<t.retries;o++)n.push(this.createTimeout(o,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(o,t)),n.sort(function(e,t){return e-t}),n},r.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},r.wrap=function(e,t,n){if(t instanceof Array&&(n=t,t=null),!n){n=[];for(var o in e)"function"==typeof e[o]&&n.push(o)}for(var i=0;i<n.length;i++){var a=n[i],s=e[a];e[a]=function(){var n=r.operation(t),o=Array.prototype.slice.call(arguments),i=o.pop();o.push(function(e){n.retry(e)||(e&&(arguments[0]=n.mainError()),i.apply(this,arguments))}),n.attempt(function(){s.apply(e,o)})},e[a].options=t}}},{"./retry_operation":174}],174:[function(e,t,r){function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._timeouts=e,this._options=t||{},this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=n,n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;this._errors.push(e);var t=this._timeouts.shift();if(void 0===t){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),t=this._timeouts.shift()}var r=this,n=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),this._options.unref&&r._timeout.unref()),r._fn(r._attempts)},t);return this._options.unref&&n.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var o=this._errors[n],i=o.message,a=(e[i]||0)+1;e[i]=a,a>=r&&(t=o,r=a)}return t}},{}],175:[function(e,t,r){var n=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],176:[function(e,t,r){var n=e("./parser"),o=e("./writer");r.write=o,r.parse=n.parse,r.parseFmtpConfig=n.parseFmtpConfig,r.parseParams=n.parseParams,r.parsePayloads=n.parsePayloads,r.parseRemoteCandidates=n.parseRemoteCandidates,r.parseImageAttributes=n.parseImageAttributes,r.parseSimulcastStreamList=n.parseSimulcastStreamList},{"./parser":177,"./writer":178}],177:[function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},o=function(e,t,r,o){if(o&&!r)t[o]=n(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=n(e[i+1]))},i=function(e,t,r){var n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:n?t[e.name]:t;o(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},a=e("./grammar"),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);r.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach(function(e){var t=e[0],o=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var c=a[t][s];if(c.reg.test(o))return i(c,n,o)}}),t.media=r,t};var c=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length&&(e[r[0]]=n(r[1])),e};r.parseParams=function(e){return e.split(/\;\s?/).reduce(c,{})},r.parseFmtpConfig=r.parseParams,r.parsePayloads=function(e){return e.split(" ").map(Number)},r.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),o=0;o<r.length;o+=3)t.push({component:r[o],ip:r[o+1],port:r[o+2]});return t},r.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(c,{})})},r.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}})})}},{"./grammar":175}],178:[function(e,t,r){var n=e("./grammar"),o=/%[sdv%]/g,i=function(e){var t=1,r=arguments,n=r.length;return e.replace(o,function(e){if(t>=n)return e;var o=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},a=function(e,t,r){var n=t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format,o=[e+"="+n];if(t.names)for(var a=0;a<t.names.length;a+=1){var s=t.names[a];t.name?o.push(r[t.name][s]):o.push(r[t.names[a]])}else o.push(r[t.name]);return i.apply(null,o)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var r=t.outerOrder||s,o=t.innerOrder||c,i=[];return r.forEach(function(t){n[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(a(t,r,e))})})}),e.media.forEach(function(e){i.push(a("m",n.m[0],e)),o.forEach(function(t){n[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(a(t,r,e))})})})}),i.join("\r\n")+"\r\n"}},{"./grammar":175}],179:[function(e,t,r){(function(r){"use strict";function n(e){e=e||r.location||{};var t,n={},o=typeof e;if("blob:"===e.protocol)n=new a(unescape(e.pathname),{});else if("string"===o){n=new a(e,{});for(t in h)delete n[t]}else if("object"===o){for(t in e)t in h||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=f.test(e.href))}return n}function o(e){var t=d.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function i(e,t){for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],i=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(i=!0),r.splice(n,1),a--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}function a(e,t,r){if(!(this instanceof a))return new a(e,t,r);var s,c,d,f,h,m,v=p.slice(),_=typeof t,b=this,y=0;for("object"!==_&&"string"!==_&&(r=t,t=null),r&&"function"!=typeof r&&(r=u.parse),t=n(t),c=o(e||""),s=!c.protocol&&!c.slashes,b.slashes=c.slashes||s&&t.slashes,b.protocol=c.protocol||t.protocol||"",e=c.rest,c.slashes||(v[2]=[/(.*)/,"pathname"]);y<v.length;y++)f=v[y],d=f[0],m=f[1],d!==d?b[m]=e:"string"==typeof d?~(h=e.indexOf(d))&&("number"==typeof f[2]?(b[m]=e.slice(0,h),e=e.slice(h+f[2])):(b[m]=e.slice(h),e=e.slice(0,h))):(h=d.exec(e))&&(b[m]=h[1],e=e.slice(0,h.index)),b[m]=b[m]||(s&&f[3]?t[m]||"":""),f[4]&&(b[m]=b[m].toLowerCase());r&&(b.query=r(b.query)),s&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=i(b.pathname,t.pathname)),l(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(f=b.auth.split(":"),b.username=f[0]||"",b.password=f[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}function s(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||u.parse)(t)),n[e]=t;break;case"port":n[e]=t,l(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";n[e]=t.charAt(0)!==o?o+t:t}else n[e]=t;break;default:n[e]=t}for(var i=0;i<p.length;i++){var a=p[i];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}
return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function c(e){e&&"function"==typeof e||(e=u.stringify);var t,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,t="object"==typeof r.query?e(r.query):r.query,t&&(o+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(o+=r.hash),o}var l=e("requires-port"),u=e("querystringify"),d=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,f=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,p=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};a.prototype={set:s,toString:c},a.extractProtocol=o,a.location=n,a.qs=u,t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:168,"requires-port":171}],180:[function(e,t,r){function n(e,t){return t?new i(e,t):new i(e)}var o=function(){return this}(),i=o.WebSocket||o.MozWebSocket,a=e("./version");i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(n,e,{get:function(){return i[e]}})}),t.exports={w3cwebsocket:i?n:null,version:a}},{"./version":181}],181:[function(e,t,r){t.exports=e("../package.json").version},{"../package.json":182}],182:[function(e,t,r){t.exports={_args:[["websocket@1.0.25","/home/alex/Desktop/JS/easy-mediasoup"]],_from:"websocket@1.0.25",_id:"websocket@1.0.25",_inBundle:!1,_integrity:"sha512-M58njvi6ZxVb5k7kpnHh2BvNKuBWiwIYvsToErBzWhvBZYwlEiLcyLrG41T1jRcrY9ettqPYEqduLI7ul54CVQ==",_location:"/websocket",_optional:!0,_phantomChildren:{ms:"2.0.0"},_requested:{type:"version",registry:!0,raw:"websocket@1.0.25",name:"websocket",escapedName:"websocket",rawSpec:"1.0.25",saveSpec:null,fetchSpec:"1.0.25"},_requiredBy:["/protoo-client"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.25.tgz",_spec:"1.0.25",_where:"/home/alex/Desktop/JS/easy-mediasoup",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"Iaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.25"}},{}],183:[function(e,t,r){function n(){}t.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,r){this.callbacks=this.callbacks||{};var n=3===arguments.length,o=n?arguments[1]:void 0,i=n?arguments[2]:arguments[1];return i._groupName=o,(this.callbacks[e]=this.callbacks[e]||[]).push(i),this},t.once=function(e,t,r){function n(){o.off(e,n),s.apply(this,arguments)}var o=this,i=3===arguments.length,a=i?arguments[1]:void 0,s=i?arguments[2]:arguments[1];return this.on(e,a,n),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,r,n,o;for(t in this.callbacks)for(o=this.callbacks[t],r=0,n=o.length;r<n;r++)o[r]._groupName===e&&(o.splice(r,1),r--,n--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var r,n=this.callbacks[e];return n?1===arguments.length?(delete this.callbacks[e],this):(r=n.indexOf(t),n.splice(r,1),0===n.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,r,n,o=[].slice.call(arguments,1),i=this.callbacks[e],a=this.getWildcardCallbacks(e);if(i)for(n=i.slice(),t=0,r=n.length;t<r&&n[t];++t)n[t].apply(this,o);if(a)for(r=a.length,n=a.slice(),t=0,r=n.length;t<r&&n[t];++t)n[t].apply(this,[e].concat(o));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,r,n=[];for(t in this.callbacks)r=t.split("*"),("*"===t||2===r.length&&e.slice(0,r[0].length)===r[0])&&(n=n.concat(this.callbacks[t]));return n}},n.mixin(n)},{}],184:[function(e,t,r){t.exports={EventTarget:e("./lib/EventTarget"),Event:e("./lib/Event")}},{"./lib/Event":185,"./lib/EventTarget":186}],185:[function(e,t,r){(function(e){t.exports=e.Event}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],186:[function(e,t,r){function n(){"function"!=typeof this.addEventListener&&(this._listeners={},this.addEventListener=o,this.removeEventListener=i,this.dispatchEvent=a)}function o(e,t){var r,n,o;if(e&&t){for(r=this._listeners[e],void 0===r&&(this._listeners[e]=r=[]),n=0;o=r[n];n++)if(o===t)return;r.push(t)}}function i(e,t){var r,n,o;if(e&&t&&void 0!==(r=this._listeners[e])){for(n=0;o=r[n];n++)if(o===t){r.splice(n,1);break}0===r.length&&delete this._listeners[e]}}function a(e){var t,r,n,o,i,a=!1;if(!e||"string"!=typeof e.type)throw new Error("`event` must have a valid `type` property");e._yaeti&&(e.target=this,e.cancelable=!0);try{e.stopImmediatePropagation=function(){a=!0}}catch(e){}for(t=e.type,r=this._listeners[t]||[],n=this["on"+t],"function"==typeof n&&n.call(this,e),o=0;(i=r[o])&&!a;o++)i.call(this,e);return!e.defaultPrevented}t.exports=n,Object.defineProperties(n.prototype,{listeners:{get:function(){return this._listeners}}})},{}]},{},[8])(8)});